(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2423],{91230:(e,t,a)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/learn-pages-router/basics/dynamic-routes/implement-getstaticpaths",function(){return a(56493)}])},25928:(e,t,a)=>{"use strict";a.d(t,{Z:()=>y});var n=a(58589),s=a(51853),o=a.n(s),r=a(10628),p=a(14517);function c(e,t){return l(t.root,e.root)&&l(t.rootMargin,e.rootMargin)&&l(t.threshold,e.thresholds)}function i(e){if(!/^-?\d*\.?\d+(?:px|%)$/.test(e))throw Error("rootMargin must be specified as a CSS margin property")}function l(e,t){return Array.isArray(e)&&Array.isArray(t)&&e.length===t.length?e.every((a,n)=>l(e[n],t[n])):e===t}a(81324);let m=function(){let e=new Map;function t(t){return e.has(t)?e.get(t):e.set(t,new Map).get(t)}function a(e,a){for(let n of e){let e=t(a).get(n.target);e&&e(n)}}return{getObserver:function(t){return function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=function(){var e;let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{root:t.root||null,rootMargin:function(e){let t=(e||"0px").trim().split(/\s+/);return t.forEach(i),t[1]=t[1]||t[0],t[2]=t[2]||t[0],t[3]=t[3]||t[1],t.join(" ")}(t.rootMargin),threshold:Array.isArray(e=t.threshold)?e:[void 0!==e?e:0]}}(t);for(let t of e.keys())if(c(t,a))return t;return null}(t)||new IntersectionObserver(a,t)},observeTarget:function(e,a,n){t(e).set(a,n),e.observe(a)},unobserveTarget:function(e,a){t(e).delete(a),e.unobserve(a)}}}(),{getObserver:d}=m,{observeTarget:k}=m,{unobserveTarget:N}=m;class u extends r.Component{static #e=this.defaultProps={disabled:!1,once:!1};componentDidMount(){this.observer=d(h(this.props)),this.observe()}UNSAFE_componentWillReceiveProps(e){let t=h(e);c(this.observer,t)||(this.unobserve(),this.observer=d(t),this.shouldReobserve=!0),this.props.disabled&&!e.disabled&&(this.shouldReobserve=!0),!this.props.disabled&&e.disabled&&this.unobserve()}componentDidUpdate(){this.shouldReobserve&&(this.observe(),this.shouldReobserve=!1)}componentWillUnmount(){this.unobserve()}observe(){this.props.disabled||k(this.observer,this.target,this.handleIntersect)}unobserve(){N(this.observer,this.target)}render(){return this.props.render?this.props.render({innerRef:this.handleTarget}):(0,r.cloneElement)(r.Children.only(this.props.children),{ref:this.handleTarget})}constructor(...e){super(...e),this.shouldReobserve=!1,this.handleTarget=e=>{if(null!==e&&"object"==typeof e&&!function(e){return e&&"function"==typeof e.getBoundingClientRect}(e))throw Error("Child did not forward the ref to a DOM element. Did you accidentally pass a class component?");this.target&&this.target!==e&&(this.unobserve(),this.shouldReobserve=!0),this.target=e},this.handleIntersect=e=>{this.props.onIntersect(e,this.props.value),this.props.once&&e.isIntersecting&&this.unobserve()}}}let h=e=>({root:e.root,rootMargin:e.rootMargin,threshold:e.threshold});function g(e){let{videoSrc:t,video:a,renderImage:s,src:o,alt:r}=e;return o?t||a?(0,n.jsx)("video",{autoPlay:!0,loop:!0,muted:!0,playsInline:!0,src:o}):s?s(e):(0,n.jsx)("img",{alt:r,src:o||null}):null}class f extends r.Component{static #e=this.defaultProps={lazy:!0};render(){let{caption:e,width:t,height:a,margin:s=40,video:r=!1,videoSrc:c,captionSpacing:i=null,renderImage:l,oversize:m=!0,float:d,lazy:k,shadow:N,style:h,...f}=this.props,y=`${String(a/t*100)}%`;return(0,n.jsx)(u,{disabled:!k,onIntersect:this.handleIntersect,once:!0,rootMargin:"20%",children:(0,n.jsxs)("figure",{className:o().dynamic([["622a55e2833827d7",[s,t?`width: ${t}px;`:"",N?"box-shadow: 0 8px 30px rgba(0,0,0,0.12)":"",t,s,s,t,d,s,d]]])+" "+((0,p.W)({oversize:t>650&&m,float:d&&t<520})||""),children:[(0,n.jsxs)("div",{className:o().dynamic([["622a55e2833827d7",[s,t?`width: ${t}px;`:"",N?"box-shadow: 0 8px 30px rgba(0,0,0,0.12)":"",t,s,s,t,d,s,d]]])+" container",children:[(0,n.jsx)("div",{style:{paddingBottom:y,...h},className:o().dynamic([["622a55e2833827d7",[s,t?`width: ${t}px;`:"",N?"box-shadow: 0 8px 30px rgba(0,0,0,0.12)":"",t,s,s,t,d,s,d]]]),children:(0,n.jsx)(g,{alt:f.alt,height:a,renderImage:l,video:r,videoSrc:c,width:t,...f,src:this.state.src})}),e?(0,n.jsx)("figcaption",{style:i?{marginTop:i}:{},className:o().dynamic([["622a55e2833827d7",[s,t?`width: ${t}px;`:"",N?"box-shadow: 0 8px 30px rgba(0,0,0,0.12)":"",t,s,s,t,d,s,d]]]),children:e}):null]}),(0,n.jsx)(o(),{id:"622a55e2833827d7",dynamic:[s,t?`width: ${t}px;`:"",N?"box-shadow: 0 8px 30px rgba(0,0,0,0.12)":"",t,s,s,t,d,s,d],children:`figure.__jsx-style-dynamic-selector{display:block;text-align:center;margin:${s}px 0}.container.__jsx-style-dynamic-selector{margin:0 auto;${t?`width: ${t}px;`:""}                max-width: 100%}@media screen and (max-width:320px){.container.__jsx-style-dynamic-selector{width:100%}}div.__jsx-style-dynamic-selector{-webkit-transform:translate3d(0,0,0);-moz-transform:translate3d(0,0,0);transform:translate3d(0,0,0);position:relative}figure.__jsx-style-dynamic-selector img,figure.__jsx-style-dynamic-selector video{height:100%;left:0;position:absolute;top:0;width:100%;${N?"box-shadow: 0 8px 30px rgba(0,0,0,0.12)":""}}figcaption.__jsx-style-dynamic-selector{color:#999;font-size:12px;margin:0;text-align:center}@media(min-width:1200px){figure.oversize.__jsx-style-dynamic-selector{width:${t}px;margin:${s}px 0 ${s}px -webkit-calc(((${t}px - 650px) / 2) * -1);margin:${s}px 0 ${s}px -moz-calc(((${t}px - 650px) / 2) * -1);margin:${s}px 0 ${s}px calc(((${t}px - 650px) / 2) * -1)}figure.float.__jsx-style-dynamic-selector{float:${d};margin:${s}px;margin-${d}:-150px}}`})]})})}constructor(...e){super(...e),this.state={src:this.props.lazy?void 0:this.props.videoSrc||this.props.src},this.handleIntersect=e=>{e.isIntersecting&&this.setState({src:this.props.videoSrc||this.props.src})}}}let y=function(e){return(0,n.jsx)(f,{...e,alt:""})}},56493:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>c,meta:()=>o}),a(10628);var n=a(16942),s=a(18590);a(25928);let o={title:"Dynamic Routes",courseId:"basics",lessonId:"dynamic-routes",stepId:"implement-getstaticpaths",subtitle:"Implement getStaticPaths"},r={meta:o},p=e=>{let{children:t}=e;return(0,n.kt)(s.Z,{meta:o},t)};function c(e){let{components:t,...a}=e;return(0,n.kt)(p,{...r,...a,components:t,mdxType:"MDXLayout"},(0,n.kt)("p",null,`First, let’s set up the files:`),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"Create a file called ",(0,n.kt)("strong",{parentName:"li"},(0,n.kt)("inlineCode",{parentName:"strong"},"[id].js"))," inside the ",(0,n.kt)("inlineCode",{parentName:"li"},"pages/posts")," directory."),(0,n.kt)("li",{parentName:"ul"},"Also, ",(0,n.kt)("strong",{parentName:"li"},"remove ",(0,n.kt)("inlineCode",{parentName:"strong"},"first-post.js"))," inside the ",(0,n.kt)("inlineCode",{parentName:"li"},"pages/posts"),` directory — we’ll no longer use this.`)),(0,n.kt)("p",null,"Then, open ",(0,n.kt)("inlineCode",{parentName:"p"},"pages/posts/[id].js"),` in your editor and paste the following code. We’ll fill in `,(0,n.kt)("inlineCode",{parentName:"p"},"...")," later:"),(0,n.kt)("pre",{className:"language-jsx"},(0,n.kt)("code",{parentName:"pre",className:"language-jsx"},(0,n.kt)("span",{parentName:"code",className:"token keyword module"},"import")," ",(0,n.kt)("span",{parentName:"code",className:"token imports"},(0,n.kt)("span",{parentName:"span",className:"token maybe-class-name"},"Layout"))," ",(0,n.kt)("span",{parentName:"code",className:"token keyword module"},"from")," ",(0,n.kt)("span",{parentName:"code",className:"token string"},"'../../components/layout'"),(0,n.kt)("span",{parentName:"code",className:"token punctuation"},";"),`

`,(0,n.kt)("span",{parentName:"code",className:"token keyword module"},"export")," ",(0,n.kt)("span",{parentName:"code",className:"token keyword module"},"default")," ",(0,n.kt)("span",{parentName:"code",className:"token keyword"},"function")," ",(0,n.kt)("span",{parentName:"code",className:"token function"},(0,n.kt)("span",{parentName:"span",className:"token maybe-class-name"},"Post")),(0,n.kt)("span",{parentName:"code",className:"token punctuation"},"("),(0,n.kt)("span",{parentName:"code",className:"token punctuation"},")")," ",(0,n.kt)("span",{parentName:"code",className:"token punctuation"},"{"),`
  `,(0,n.kt)("span",{parentName:"code",className:"token keyword control-flow"},"return")," ",(0,n.kt)("span",{parentName:"code",className:"token tag"},(0,n.kt)("span",{parentName:"span",className:"token tag"},(0,n.kt)("span",{parentName:"span",className:"token punctuation"},"<"),(0,n.kt)("span",{parentName:"span",className:"token class-name"},"Layout")),(0,n.kt)("span",{parentName:"span",className:"token punctuation"},">")),(0,n.kt)("span",{parentName:"code",className:"token plain-text"},"..."),(0,n.kt)("span",{parentName:"code",className:"token tag"},(0,n.kt)("span",{parentName:"span",className:"token tag"},(0,n.kt)("span",{parentName:"span",className:"token punctuation"},"</"),(0,n.kt)("span",{parentName:"span",className:"token class-name"},"Layout")),(0,n.kt)("span",{parentName:"span",className:"token punctuation"},">")),(0,n.kt)("span",{parentName:"code",className:"token punctuation"},";"),`
`,(0,n.kt)("span",{parentName:"code",className:"token punctuation"},"}"),`
`)),(0,n.kt)("p",null,"Then, open ",(0,n.kt)("inlineCode",{parentName:"p"},"lib/posts.js")," and add the following ",(0,n.kt)("inlineCode",{parentName:"p"},"getAllPostIds")," function at the bottom. It will return the list of file names (excluding ",(0,n.kt)("inlineCode",{parentName:"p"},".md"),") in the ",(0,n.kt)("inlineCode",{parentName:"p"},"posts")," directory:"),(0,n.kt)("pre",{className:"language-jsx"},(0,n.kt)("code",{parentName:"pre",className:"language-jsx"},(0,n.kt)("span",{parentName:"code",className:"token keyword module"},"export")," ",(0,n.kt)("span",{parentName:"code",className:"token keyword"},"function")," ",(0,n.kt)("span",{parentName:"code",className:"token function"},"getAllPostIds"),(0,n.kt)("span",{parentName:"code",className:"token punctuation"},"("),(0,n.kt)("span",{parentName:"code",className:"token punctuation"},")")," ",(0,n.kt)("span",{parentName:"code",className:"token punctuation"},"{"),`
  `,(0,n.kt)("span",{parentName:"code",className:"token keyword"},"const")," fileNames ",(0,n.kt)("span",{parentName:"code",className:"token operator"},"=")," fs",(0,n.kt)("span",{parentName:"code",className:"token punctuation"},"."),(0,n.kt)("span",{parentName:"code",className:"token method function property-access"},"readdirSync"),(0,n.kt)("span",{parentName:"code",className:"token punctuation"},"("),"postsDirectory",(0,n.kt)("span",{parentName:"code",className:"token punctuation"},")"),(0,n.kt)("span",{parentName:"code",className:"token punctuation"},";"),`

  `,(0,n.kt)("span",{parentName:"code",className:"token comment"},"// Returns an array that looks like this:"),`
  `,(0,n.kt)("span",{parentName:"code",className:"token comment"},"// ["),`
  `,(0,n.kt)("span",{parentName:"code",className:"token comment"},"//   {"),`
  `,(0,n.kt)("span",{parentName:"code",className:"token comment"},"//     params: {"),`
  `,(0,n.kt)("span",{parentName:"code",className:"token comment"},"//       id: 'ssg-ssr'"),`
  `,(0,n.kt)("span",{parentName:"code",className:"token comment"},"//     }"),`
  `,(0,n.kt)("span",{parentName:"code",className:"token comment"},"//   },"),`
  `,(0,n.kt)("span",{parentName:"code",className:"token comment"},"//   {"),`
  `,(0,n.kt)("span",{parentName:"code",className:"token comment"},"//     params: {"),`
  `,(0,n.kt)("span",{parentName:"code",className:"token comment"},"//       id: 'pre-rendering'"),`
  `,(0,n.kt)("span",{parentName:"code",className:"token comment"},"//     }"),`
  `,(0,n.kt)("span",{parentName:"code",className:"token comment"},"//   }"),`
  `,(0,n.kt)("span",{parentName:"code",className:"token comment"},"// ]"),`
  `,(0,n.kt)("span",{parentName:"code",className:"token keyword control-flow"},"return")," fileNames",(0,n.kt)("span",{parentName:"code",className:"token punctuation"},"."),(0,n.kt)("span",{parentName:"code",className:"token method function property-access"},"map"),(0,n.kt)("span",{parentName:"code",className:"token punctuation"},"("),(0,n.kt)("span",{parentName:"code",className:"token punctuation"},"("),(0,n.kt)("span",{parentName:"code",className:"token parameter"},"fileName"),(0,n.kt)("span",{parentName:"code",className:"token punctuation"},")")," ",(0,n.kt)("span",{parentName:"code",className:"token arrow operator"},"=>")," ",(0,n.kt)("span",{parentName:"code",className:"token punctuation"},"{"),`
    `,(0,n.kt)("span",{parentName:"code",className:"token keyword control-flow"},"return")," ",(0,n.kt)("span",{parentName:"code",className:"token punctuation"},"{"),`
      `,(0,n.kt)("span",{parentName:"code",className:"token literal-property property"},"params"),(0,n.kt)("span",{parentName:"code",className:"token operator"},":")," ",(0,n.kt)("span",{parentName:"code",className:"token punctuation"},"{"),`
        `,(0,n.kt)("span",{parentName:"code",className:"token literal-property property"},"id"),(0,n.kt)("span",{parentName:"code",className:"token operator"},":")," fileName",(0,n.kt)("span",{parentName:"code",className:"token punctuation"},"."),(0,n.kt)("span",{parentName:"code",className:"token method function property-access"},"replace"),(0,n.kt)("span",{parentName:"code",className:"token punctuation"},"("),(0,n.kt)("span",{parentName:"code",className:"token regex"},(0,n.kt)("span",{parentName:"span",className:"token regex-delimiter"},"/"),(0,n.kt)("span",{parentName:"span",className:"token regex-source language-regex"},"\\.md$"),(0,n.kt)("span",{parentName:"span",className:"token regex-delimiter"},"/")),(0,n.kt)("span",{parentName:"code",className:"token punctuation"},",")," ",(0,n.kt)("span",{parentName:"code",className:"token string"},"''"),(0,n.kt)("span",{parentName:"code",className:"token punctuation"},")"),(0,n.kt)("span",{parentName:"code",className:"token punctuation"},","),`
      `,(0,n.kt)("span",{parentName:"code",className:"token punctuation"},"}"),(0,n.kt)("span",{parentName:"code",className:"token punctuation"},","),`
    `,(0,n.kt)("span",{parentName:"code",className:"token punctuation"},"}"),(0,n.kt)("span",{parentName:"code",className:"token punctuation"},";"),`
  `,(0,n.kt)("span",{parentName:"code",className:"token punctuation"},"}"),(0,n.kt)("span",{parentName:"code",className:"token punctuation"},")"),(0,n.kt)("span",{parentName:"code",className:"token punctuation"},";"),`
`,(0,n.kt)("span",{parentName:"code",className:"token punctuation"},"}"),`
`)),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},"Important"),": The returned list is ",(0,n.kt)("em",{parentName:"p"},"not"),` just an array of strings — it `,(0,n.kt)("strong",{parentName:"p"},"must")," be an array of objects that look like the comment above. Each object must have the ",(0,n.kt)("inlineCode",{parentName:"p"},"params")," key and contain an object with the ",(0,n.kt)("inlineCode",{parentName:"p"},"id"),` key (because we’re using `,(0,n.kt)("inlineCode",{parentName:"p"},"[id]")," in the file name). Otherwise, ",(0,n.kt)("a",{parentName:"p",href:"/docs/pages/building-your-application/data-fetching/get-static-paths"},(0,n.kt)("inlineCode",{parentName:"a"},"getStaticPaths"))," will fail."),(0,n.kt)("p",null,"Finally, we'll import the ",(0,n.kt)("inlineCode",{parentName:"p"},"getAllPostIds")," function and use it inside ",(0,n.kt)("a",{parentName:"p",href:"/docs/pages/building-your-application/data-fetching/get-static-paths"},(0,n.kt)("inlineCode",{parentName:"a"},"getStaticPaths")),". Open ",(0,n.kt)("inlineCode",{parentName:"p"},"pages/posts/[id].js")," and copy the following code above the exported ",(0,n.kt)("inlineCode",{parentName:"p"},"Post")," component:"),(0,n.kt)("pre",{className:"language-js"},(0,n.kt)("code",{parentName:"pre",className:"language-js"},(0,n.kt)("span",{parentName:"code",className:"token keyword module"},"import")," ",(0,n.kt)("span",{parentName:"code",className:"token imports"},(0,n.kt)("span",{parentName:"span",className:"token punctuation"},"{")," getAllPostIds ",(0,n.kt)("span",{parentName:"span",className:"token punctuation"},"}"))," ",(0,n.kt)("span",{parentName:"code",className:"token keyword module"},"from")," ",(0,n.kt)("span",{parentName:"code",className:"token string"},"'../../lib/posts'"),(0,n.kt)("span",{parentName:"code",className:"token punctuation"},";"),`

`,(0,n.kt)("span",{parentName:"code",className:"token keyword module"},"export")," ",(0,n.kt)("span",{parentName:"code",className:"token keyword"},"async")," ",(0,n.kt)("span",{parentName:"code",className:"token keyword"},"function")," ",(0,n.kt)("span",{parentName:"code",className:"token function"},"getStaticPaths"),(0,n.kt)("span",{parentName:"code",className:"token punctuation"},"("),(0,n.kt)("span",{parentName:"code",className:"token punctuation"},")")," ",(0,n.kt)("span",{parentName:"code",className:"token punctuation"},"{"),`
  `,(0,n.kt)("span",{parentName:"code",className:"token keyword"},"const")," paths ",(0,n.kt)("span",{parentName:"code",className:"token operator"},"=")," ",(0,n.kt)("span",{parentName:"code",className:"token function"},"getAllPostIds"),(0,n.kt)("span",{parentName:"code",className:"token punctuation"},"("),(0,n.kt)("span",{parentName:"code",className:"token punctuation"},")"),(0,n.kt)("span",{parentName:"code",className:"token punctuation"},";"),`
  `,(0,n.kt)("span",{parentName:"code",className:"token keyword control-flow"},"return")," ",(0,n.kt)("span",{parentName:"code",className:"token punctuation"},"{"),`
    paths`,(0,n.kt)("span",{parentName:"code",className:"token punctuation"},","),`
    `,(0,n.kt)("span",{parentName:"code",className:"token literal-property property"},"fallback"),(0,n.kt)("span",{parentName:"code",className:"token operator"},":")," ",(0,n.kt)("span",{parentName:"code",className:"token boolean"},"false"),(0,n.kt)("span",{parentName:"code",className:"token punctuation"},","),`
  `,(0,n.kt)("span",{parentName:"code",className:"token punctuation"},"}"),(0,n.kt)("span",{parentName:"code",className:"token punctuation"},";"),`
`,(0,n.kt)("span",{parentName:"code",className:"token punctuation"},"}"),`
`)),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("inlineCode",{parentName:"li"},"paths")," contains the array of known paths returned by ",(0,n.kt)("inlineCode",{parentName:"li"},"getAllPostIds()"),", which include the params defined by ",(0,n.kt)("inlineCode",{parentName:"li"},"pages/posts/[id].js"),". Learn more in the ",(0,n.kt)("a",{parentName:"li",href:"/docs/pages/api-reference/functions/get-static-paths#paths"},(0,n.kt)("inlineCode",{parentName:"a"},"paths")," key documentation")),(0,n.kt)("li",{parentName:"ul"},"Ignore ",(0,n.kt)("a",{parentName:"li",href:""},(0,n.kt)("inlineCode",{parentName:"a"},"fallback: false")),` for now — we’ll explain that later.`)),(0,n.kt)("p",null,`We’re almost done — but we still need to implement `,(0,n.kt)("a",{parentName:"p",href:"/docs/pages/building-your-application/data-fetching/get-static-props"},(0,n.kt)("inlineCode",{parentName:"a"},"getStaticProps")),`. Let’s do that on the next page!`))}c.isMDXComponent=!0}},e=>{var t=t=>e(e.s=t);e.O(0,[27,8746,4371,2878,4730,1324,1067,8590,2888,9774,179],()=>t(91230)),_N_E=e.O()}]);