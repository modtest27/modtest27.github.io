(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5006],{60978:(e,a,t)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/learn-pages-router/basics/api-routes/creating-api-routes",function(){return t(1053)}])},1053:(e,a,t)=>{"use strict";t.r(a),t.d(a,{default:()=>c,meta:()=>o}),t(10628);var n=t(16942),s=t(18590);let o={title:"API Routes",courseId:"basics",lessonId:"api-routes",stepId:"creating-api-routes",subtitle:"Creating API Routes"},p={meta:o},r=e=>{let{children:a}=e;return(0,n.kt)(s.Z,{meta:o},a)};function c(e){let{components:a,...t}=e;return(0,n.kt)(r,{...p,...t,components:a,mdxType:"MDXLayout"},(0,n.kt)("p",null,(0,n.kt)("a",{parentName:"p",href:"/docs/api-routes/introduction"},"API Routes")," let you create an API endpoint inside a Next.js app. You can do so by creating a ",(0,n.kt)("strong",{parentName:"p"},"function")," inside the ",(0,n.kt)("inlineCode",{parentName:"p"},"pages/api")," directory that has the following format:"),(0,n.kt)("pre",{className:"language-js"},(0,n.kt)("code",{parentName:"pre",className:"language-js"},(0,n.kt)("span",{parentName:"code",className:"token comment"},"// req = HTTP incoming message, res = HTTP server response"),`
`,(0,n.kt)("span",{parentName:"code",className:"token keyword module"},"export")," ",(0,n.kt)("span",{parentName:"code",className:"token keyword module"},"default")," ",(0,n.kt)("span",{parentName:"code",className:"token keyword"},"function")," ",(0,n.kt)("span",{parentName:"code",className:"token function"},"handler"),(0,n.kt)("span",{parentName:"code",className:"token punctuation"},"("),(0,n.kt)("span",{parentName:"code",className:"token parameter"},"req",(0,n.kt)("span",{parentName:"span",className:"token punctuation"},",")," res"),(0,n.kt)("span",{parentName:"code",className:"token punctuation"},")")," ",(0,n.kt)("span",{parentName:"code",className:"token punctuation"},"{"),`
  `,(0,n.kt)("span",{parentName:"code",className:"token comment"},"// ..."),`
`,(0,n.kt)("span",{parentName:"code",className:"token punctuation"},"}"),`
`)),(0,n.kt)("blockquote",null,(0,n.kt)("p",{parentName:"blockquote"},"Learn more about the request handler above in the ",(0,n.kt)("a",{parentName:"p",href:"/docs/api-routes/introduction"},"API Routes documentation"),".")),(0,n.kt)("p",null,"They can be deployed as Serverless Functions (also known as Lambdas)."),(0,n.kt)("h3",null,"Creating a simple API endpoint"),(0,n.kt)("p",null,`Let’s try it out. Create a file called `,(0,n.kt)("inlineCode",{parentName:"p"},"hello.js")," in ",(0,n.kt)("inlineCode",{parentName:"p"},"pages/api")," with the following code:"),(0,n.kt)("pre",{className:"language-js"},(0,n.kt)("code",{parentName:"pre",className:"language-js"},(0,n.kt)("span",{parentName:"code",className:"token keyword module"},"export")," ",(0,n.kt)("span",{parentName:"code",className:"token keyword module"},"default")," ",(0,n.kt)("span",{parentName:"code",className:"token keyword"},"function")," ",(0,n.kt)("span",{parentName:"code",className:"token function"},"handler"),(0,n.kt)("span",{parentName:"code",className:"token punctuation"},"("),(0,n.kt)("span",{parentName:"code",className:"token parameter"},"req",(0,n.kt)("span",{parentName:"span",className:"token punctuation"},",")," res"),(0,n.kt)("span",{parentName:"code",className:"token punctuation"},")")," ",(0,n.kt)("span",{parentName:"code",className:"token punctuation"},"{"),`
  res`,(0,n.kt)("span",{parentName:"code",className:"token punctuation"},"."),(0,n.kt)("span",{parentName:"code",className:"token method function property-access"},"status"),(0,n.kt)("span",{parentName:"code",className:"token punctuation"},"("),(0,n.kt)("span",{parentName:"code",className:"token number"},"200"),(0,n.kt)("span",{parentName:"code",className:"token punctuation"},")"),(0,n.kt)("span",{parentName:"code",className:"token punctuation"},"."),(0,n.kt)("span",{parentName:"code",className:"token method function property-access"},"json"),(0,n.kt)("span",{parentName:"code",className:"token punctuation"},"("),(0,n.kt)("span",{parentName:"code",className:"token punctuation"},"{")," ",(0,n.kt)("span",{parentName:"code",className:"token literal-property property"},"text"),(0,n.kt)("span",{parentName:"code",className:"token operator"},":")," ",(0,n.kt)("span",{parentName:"code",className:"token string"},"'Hello'")," ",(0,n.kt)("span",{parentName:"code",className:"token punctuation"},"}"),(0,n.kt)("span",{parentName:"code",className:"token punctuation"},")"),(0,n.kt)("span",{parentName:"code",className:"token punctuation"},";"),`
`,(0,n.kt)("span",{parentName:"code",className:"token punctuation"},"}"),`
`)),(0,n.kt)("p",null,"Try accessing it at ",(0,n.kt)("a",{parentName:"p",href:"http://localhost:3000/api/hello"},"http://localhost:3000/api/hello"),". You should see ",(0,n.kt)("inlineCode",{parentName:"p"},'{"text":"Hello"}'),". Note that:"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("inlineCode",{parentName:"li"},"req")," is an instance of ",(0,n.kt)("a",{parentName:"li",href:"https://nodejs.org/api/http.html#http_class_http_incomingmessage"},"http.IncomingMessage"),", plus some pre-built ",(0,n.kt)("a",{parentName:"li",href:"/docs/api-routes/api-middlewares"},"middlewares"),"."),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("inlineCode",{parentName:"li"},"res")," is an instance of ",(0,n.kt)("a",{parentName:"li",href:"https://nodejs.org/api/http.html#http_class_http_serverresponse"},"http.ServerResponse"),", plus some ",(0,n.kt)("a",{parentName:"li",href:"/docs/api-routes/response-helpers"},"helper functions"),".")),(0,n.kt)("p",null,`That’s it! Before we wrap up this lesson, let’s talk about some tips for using `,(0,n.kt)("a",{parentName:"p",href:"/docs/api-routes/introduction"},"API Routes")," on the next page."))}c.isMDXComponent=!0}},e=>{var a=a=>e(e.s=a);e.O(0,[27,8746,4371,2878,4730,1067,8590,2888,9774,179],()=>a(60978)),_N_E=e.O()}]);