(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9288],{81757:(e,a,t)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/learn-pages-router/basics/data-fetching/getstaticprops-details",function(){return t(76113)}])},76988:(e,a,t)=>{"use strict";t.d(a,{Z:()=>k});var n=t(58589),s=t(51853),r=t.n(s);t(10628);let o=function(e){let{color:a}=e;return(0,n.jsx)("svg",{height:"16",viewBox:"0 0 24 24",width:"16",children:(0,n.jsx)("g",{fill:a||"#111111",children:(0,n.jsx)("path",{d:"M12,0A12,12,0,1,0,24,12,12.035,12.035,0,0,0,12,0Zm4.95,15.536L15.536,16.95,12,13.414,8.464,16.95,7.05,15.536,10.586,12,7.05,8.464,8.464,7.05,12,10.586,15.536,7.05,16.95,8.464,13.414,12Z",fill:a||"#111111"})})})};var c=t(39313),i=t(2072),d=t(24230);function l(e){return(0,n.jsxs)("div",{className:"jsx-dd7ad94e93d3b01d",children:[e.children,(0,n.jsx)(r(),{id:"dd7ad94e93d3b01d",children:"div.jsx-dd7ad94e93d3b01d{background:#fafafa;border:1px solid#eaeaea;-webkit-border-radius:8px;-moz-border-radius:8px;border-radius:8px;padding:0 16px 16px 16px;margin-top:2rem;margin-bottom:4rem;counter-reset:answer-list}"})]})}function p(e){let{value:a,onChange:t,selected:s,readOnly:o,children:c}=e;return(0,n.jsxs)("label",{className:r().dynamic([["8b254666bc533ef1",[o?"":"cursor: pointer;"]]])+" "+`f5${o?" disabled":""}`,children:[(0,n.jsx)("input",{defaultChecked:s,disabled:o,name:"answer",onChange:t,type:"radio",value:a,className:r().dynamic([["8b254666bc533ef1",[o?"":"cursor: pointer;"]]])}),(0,n.jsx)("span",{className:r().dynamic([["8b254666bc533ef1",[o?"":"cursor: pointer;"]]]),children:c}),(0,n.jsx)(r(),{id:"8b254666bc533ef1",dynamic:[o?"":"cursor: pointer;"],children:`input.__jsx-style-dynamic-selector{display:none}input.__jsx-style-dynamic-selector:checked+span.__jsx-style-dynamic-selector{color:#111;border-color:#111;-webkit-box-shadow:0 0 0 3px#c1c1c1;-moz-box-shadow:0 0 0 3px#c1c1c1;box-shadow:0 0 0 3px#c1c1c1;font-weight:600}label.__jsx-style-dynamic-selector{display:block;margin:.5rem 0;${o?"":"cursor: pointer;"}}label.__jsx-style-dynamic-selector span.__jsx-style-dynamic-selector:before{counter-increment:answer-list;content:counter(answer-list,upper-alpha)". ";display:inline-block;width:1.5rem}span.__jsx-style-dynamic-selector{color:#666;display:block;padding:.5rem 1rem;-webkit-border-radius:7px;-moz-border-radius:7px;border-radius:7px;border:1px solid#666;background:white;-webkit-transition:box-shadow.2s ease;-moz-transition:box-shadow.2s ease;-o-transition:box-shadow.2s ease;transition:box-shadow.2s ease}.disabled.__jsx-style-dynamic-selector input.__jsx-style-dynamic-selector+span.__jsx-style-dynamic-selector{border-color:#eaeaea}.disabled.__jsx-style-dynamic-selector input.__jsx-style-dynamic-selector:checked+span.__jsx-style-dynamic-selector{color:unset;font-weight:500;background:white;border-color:#111}`})]})}function m(e){let{correct:a,selected:t}=e;return a||t?(0,n.jsxs)("span",{className:"jsx-bebc3d1a0cbd6a11",children:[a?(0,n.jsx)(c.Z,{color:"#0070f3"}):(0,n.jsx)(o,{color:"#e00"}),(0,n.jsx)(r(),{id:"bebc3d1a0cbd6a11",children:"span.jsx-bebc3d1a0cbd6a11{display:inline-block;line-height:1;vertical-align:middle;margin-left:.25rem}"})]}):null}function u(e){let{answer:a,correctAnswer:t}=e;return(0,n.jsxs)(n.Fragment,{children:[void 0!==a&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(m,{correct:a===t,selected:!0})," "]}),void 0===a?(0,n.jsxs)(n.Fragment,{children:["The correct answer is: ",(0,n.jsx)("strong",{className:"jsx-df362a97111b04e9",children:t})]}):a===t?(0,n.jsxs)("span",{className:"jsx-df362a97111b04e9 correct-message",children:[(0,n.jsx)("strong",{className:"jsx-df362a97111b04e9",children:"Correct."})," Good job!"]}):(0,n.jsxs)("span",{className:"jsx-df362a97111b04e9 incorrect-message",children:[(0,n.jsx)("strong",{className:"jsx-df362a97111b04e9",children:"Incorrect,"})," but nice try!"]}),(0,n.jsx)(r(),{id:"df362a97111b04e9",children:".correct-message.jsx-df362a97111b04e9{color:#0070f3}.incorrect-message.jsx-df362a97111b04e9{color:#e00}"})]})}let k=function(e){let{meta:a,answers:t,correctAnswer:s,children:o}=e,[c,k]=(0,i.a)(a);return(0,n.jsxs)(l,{children:[o,t.map(e=>(0,n.jsxs)(p,{onChange:e=>k({type:"answer",answer:e.target.value}),readOnly:c.submitted,selected:e===c.answer,value:e,children:[e," ",c.submitted?(0,n.jsx)(m,{correct:e===s,selected:e===c.answer}):null]},e)),(0,n.jsxs)("div",{className:"jsx-96319d8491e83c58",children:[c.submitted?(0,n.jsx)(u,{answer:c.answer,correctAnswer:s}):(0,n.jsx)(d.Z,{invert:!0,onClick:()=>{k({type:"submit"}),c.answer===s&&k({type:"check"})},shadowColor:"rgba(0, 0, 0, 0.2)",children:"Submit"}),(0,n.jsx)(r(),{id:"96319d8491e83c58",children:"div.jsx-96319d8491e83c58{margin-top:2rem}"})]})]})}},76113:(e,a,t)=>{"use strict";t.r(a),t.d(a,{default:()=>d,meta:()=>o}),t(10628);var n=t(16942),s=t(18590),r=t(76988);let o={title:"Pre-rendering and Data Fetching",courseId:"basics",lessonId:"data-fetching",stepId:"getstaticprops-details",subtitle:"getStaticProps Details"},c={meta:o},i=e=>{let{children:a}=e;return(0,n.kt)(s.Z,{meta:o},a)};function d(e){let{components:a,...t}=e;return(0,n.kt)(i,{...c,...t,components:a,mdxType:"MDXLayout"},(0,n.kt)("p",null,"Here is some essential information you should know about ",(0,n.kt)("a",{parentName:"p",href:"/docs/basic-features/data-fetching#getstaticprops-static-generation"},(0,n.kt)("inlineCode",{parentName:"a"},"getStaticProps")),"."),(0,n.kt)("h3",null,"Fetch External API or Query Database"),(0,n.kt)("p",null,"In ",(0,n.kt)("inlineCode",{parentName:"p"},"lib/posts.js"),`, we’ve implemented `,(0,n.kt)("inlineCode",{parentName:"p"},"getSortedPostsData"),` which fetches data from the file system. But you can fetch the data from other sources, like an external API endpoint, and it’ll work just fine:`),(0,n.kt)("pre",{className:"language-js"},(0,n.kt)("code",{parentName:"pre",className:"language-js"},(0,n.kt)("span",{parentName:"code",className:"token keyword module"},"export")," ",(0,n.kt)("span",{parentName:"code",className:"token keyword"},"async")," ",(0,n.kt)("span",{parentName:"code",className:"token keyword"},"function")," ",(0,n.kt)("span",{parentName:"code",className:"token function"},"getSortedPostsData"),(0,n.kt)("span",{parentName:"code",className:"token punctuation"},"("),(0,n.kt)("span",{parentName:"code",className:"token punctuation"},")")," ",(0,n.kt)("span",{parentName:"code",className:"token punctuation"},"{"),`
  `,(0,n.kt)("span",{parentName:"code",className:"token comment"},"// Instead of the file system,"),`
  `,(0,n.kt)("span",{parentName:"code",className:"token comment"},"// fetch post data from an external API endpoint"),`
  `,(0,n.kt)("span",{parentName:"code",className:"token keyword"},"const")," res ",(0,n.kt)("span",{parentName:"code",className:"token operator"},"=")," ",(0,n.kt)("span",{parentName:"code",className:"token keyword control-flow"},"await")," ",(0,n.kt)("span",{parentName:"code",className:"token function"},"fetch"),(0,n.kt)("span",{parentName:"code",className:"token punctuation"},"("),(0,n.kt)("span",{parentName:"code",className:"token string"},"'..'"),(0,n.kt)("span",{parentName:"code",className:"token punctuation"},")"),(0,n.kt)("span",{parentName:"code",className:"token punctuation"},";"),`
  `,(0,n.kt)("span",{parentName:"code",className:"token keyword control-flow"},"return")," res",(0,n.kt)("span",{parentName:"code",className:"token punctuation"},"."),(0,n.kt)("span",{parentName:"code",className:"token method function property-access"},"json"),(0,n.kt)("span",{parentName:"code",className:"token punctuation"},"("),(0,n.kt)("span",{parentName:"code",className:"token punctuation"},")"),(0,n.kt)("span",{parentName:"code",className:"token punctuation"},";"),`
`,(0,n.kt)("span",{parentName:"code",className:"token punctuation"},"}"),`
`)),(0,n.kt)("blockquote",null,(0,n.kt)("p",{parentName:"blockquote"},(0,n.kt)("strong",{parentName:"p"},"Note"),": Next.js polyfills ",(0,n.kt)("a",{parentName:"p",href:"/docs/basic-features/supported-browsers-features"},(0,n.kt)("inlineCode",{parentName:"a"},"fetch()"))," on both the client and server. You don't need to import it.")),(0,n.kt)("p",null,"You can also query the database directly:"),(0,n.kt)("pre",{className:"language-js"},(0,n.kt)("code",{parentName:"pre",className:"language-js"},(0,n.kt)("span",{parentName:"code",className:"token keyword module"},"import")," ",(0,n.kt)("span",{parentName:"code",className:"token imports"},"someDatabaseSDK")," ",(0,n.kt)("span",{parentName:"code",className:"token keyword module"},"from")," ",(0,n.kt)("span",{parentName:"code",className:"token string"},"'someDatabaseSDK'"),`

`,(0,n.kt)("span",{parentName:"code",className:"token keyword"},"const")," databaseClient ",(0,n.kt)("span",{parentName:"code",className:"token operator"},"=")," someDatabaseSDK",(0,n.kt)("span",{parentName:"code",className:"token punctuation"},"."),(0,n.kt)("span",{parentName:"code",className:"token method function property-access"},"createClient"),(0,n.kt)("span",{parentName:"code",className:"token punctuation"},"("),(0,n.kt)("span",{parentName:"code",className:"token spread operator"},"..."),(0,n.kt)("span",{parentName:"code",className:"token punctuation"},")"),`

`,(0,n.kt)("span",{parentName:"code",className:"token keyword module"},"export")," ",(0,n.kt)("span",{parentName:"code",className:"token keyword"},"async")," ",(0,n.kt)("span",{parentName:"code",className:"token keyword"},"function")," ",(0,n.kt)("span",{parentName:"code",className:"token function"},"getSortedPostsData"),(0,n.kt)("span",{parentName:"code",className:"token punctuation"},"("),(0,n.kt)("span",{parentName:"code",className:"token punctuation"},")")," ",(0,n.kt)("span",{parentName:"code",className:"token punctuation"},"{"),`
  `,(0,n.kt)("span",{parentName:"code",className:"token comment"},"// Instead of the file system,"),`
  `,(0,n.kt)("span",{parentName:"code",className:"token comment"},"// fetch post data from a database"),`
  `,(0,n.kt)("span",{parentName:"code",className:"token keyword control-flow"},"return")," databaseClient",(0,n.kt)("span",{parentName:"code",className:"token punctuation"},"."),(0,n.kt)("span",{parentName:"code",className:"token method function property-access"},"query"),(0,n.kt)("span",{parentName:"code",className:"token punctuation"},"("),(0,n.kt)("span",{parentName:"code",className:"token string"},"'SELECT posts...'"),(0,n.kt)("span",{parentName:"code",className:"token punctuation"},")"),`
`,(0,n.kt)("span",{parentName:"code",className:"token punctuation"},"}"),`
`)),(0,n.kt)("p",null,"This is possible because ",(0,n.kt)("a",{parentName:"p",href:"/docs/basic-features/data-fetching#getstaticprops-static-generation"},(0,n.kt)("inlineCode",{parentName:"a"},"getStaticProps"))," only ",(0,n.kt)("strong",{parentName:"p"},"runs on the server-side"),`. It will never run on the client-side. It won’t even be included in the JS bundle for the browser. That means you can write code such as direct database queries without them being sent to browsers.`),(0,n.kt)("h3",null,"Development vs. Production"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"In ",(0,n.kt)("strong",{parentName:"li"},"development")," (",(0,n.kt)("inlineCode",{parentName:"li"},"npm run dev")," or ",(0,n.kt)("inlineCode",{parentName:"li"},"yarn dev"),"), ",(0,n.kt)("a",{parentName:"li",href:"/docs/basic-features/data-fetching#getstaticprops-static-generation"},(0,n.kt)("inlineCode",{parentName:"a"},"getStaticProps"))," runs on ",(0,n.kt)("em",{parentName:"li"},"every request"),"."),(0,n.kt)("li",{parentName:"ul"},"In ",(0,n.kt)("strong",{parentName:"li"},"production"),", ",(0,n.kt)("a",{parentName:"li",href:"/docs/basic-features/data-fetching#getstaticprops-static-generation"},(0,n.kt)("inlineCode",{parentName:"a"},"getStaticProps"))," runs at ",(0,n.kt)("em",{parentName:"li"},"build time"),". However, this behavior can be enhanced using the ",(0,n.kt)("a",{parentName:"li",href:"/docs/api-reference/data-fetching/get-static-paths#fallback-false"},(0,n.kt)("inlineCode",{parentName:"a"},"fallback")," key")," returned by ",(0,n.kt)("a",{parentName:"li",href:"/docs/basic-features/data-fetching#getstaticpaths-static-generation"},(0,n.kt)("inlineCode",{parentName:"a"},"getStaticPaths")))),(0,n.kt)("p",null,`Because it’s meant to be run at build time, you won’t be able to use data that’s only available during request time, such as query parameters or HTTP headers.`),(0,n.kt)("h3",null,"Only Allowed in a Page"),(0,n.kt)("p",null,(0,n.kt)("a",{parentName:"p",href:"/docs/basic-features/data-fetching#getstaticprops-static-generation"},(0,n.kt)("inlineCode",{parentName:"a"},"getStaticProps"))," can only be exported from a ",(0,n.kt)("a",{parentName:"p",href:"/docs/basic-features/pages"},(0,n.kt)("strong",{parentName:"a"},"page")),`. You can’t export it from non-page files.`),(0,n.kt)("p",null,"One of the reasons for this restriction is that React needs to have all the required data before the page is rendered."),(0,n.kt)("h3",null,"What If I Need to Fetch Data at Request Time?"),(0,n.kt)("p",null,"Since ",(0,n.kt)("a",{parentName:"p",href:"/docs/basic-features/pages#static-generation-recommended"},"Static Generation")," happens once at build time, it's not suitable for data that updates frequently or changes on every user request."),(0,n.kt)("p",null,"In cases like this, where your data is likely to change, you can use ",(0,n.kt)("a",{parentName:"p",href:"/docs/basic-features/pages#server-side-rendering"},(0,n.kt)("strong",{parentName:"a"},"Server-side Rendering")),". Let's learn more about server-side rendering in the next section."),(0,n.kt)(r.Z,{meta:o,answers:["Client-side","Server-side","Both"],correctAnswer:"Server-side",mdxType:"AnswerBox"},(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},"Quick Review"),": Where does ",(0,n.kt)("inlineCode",{parentName:"p"},"getStaticProps")," run?")))}d.isMDXComponent=!0}},e=>{var a=a=>e(e.s=a);e.O(0,[27,8746,4371,2878,4730,1067,8590,2888,9774,179],()=>a(81757)),_N_E=e.O()}]);