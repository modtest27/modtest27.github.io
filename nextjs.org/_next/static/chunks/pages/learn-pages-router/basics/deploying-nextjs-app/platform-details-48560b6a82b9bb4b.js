(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7887],{67113:(e,t,r)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/learn-pages-router/basics/deploying-nextjs-app/platform-details",function(){return r(52397)}])},25928:(e,t,r)=>{"use strict";r.d(t,{Z:()=>k});var n=r(58589),a=r(51853),o=r.n(a),s=r(10628),i=r(14517);function l(e,t){return d(t.root,e.root)&&d(t.rootMargin,e.rootMargin)&&d(t.threshold,e.thresholds)}function p(e){if(!/^-?\d*\.?\d+(?:px|%)$/.test(e))throw Error("rootMargin must be specified as a CSS margin property")}function d(e,t){return Array.isArray(e)&&Array.isArray(t)&&e.length===t.length?e.every((r,n)=>d(e[n],t[n])):e===t}r(81324);let u=function(){let e=new Map;function t(t){return e.has(t)?e.get(t):e.set(t,new Map).get(t)}function r(e,r){for(let n of e){let e=t(r).get(n.target);e&&e(n)}}return{getObserver:function(t){return function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=function(){var e;let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{root:t.root||null,rootMargin:function(e){let t=(e||"0px").trim().split(/\s+/);return t.forEach(p),t[1]=t[1]||t[0],t[2]=t[2]||t[0],t[3]=t[3]||t[1],t.join(" ")}(t.rootMargin),threshold:Array.isArray(e=t.threshold)?e:[void 0!==e?e:0]}}(t);for(let t of e.keys())if(l(t,r))return t;return null}(t)||new IntersectionObserver(r,t)},observeTarget:function(e,r,n){t(e).set(r,n),e.observe(r)},unobserveTarget:function(e,r){t(e).delete(r),e.unobserve(r)}}}(),{getObserver:c}=u,{observeTarget:h}=u,{unobserveTarget:m}=u;class g extends s.Component{static #e=this.defaultProps={disabled:!1,once:!1};componentDidMount(){this.observer=c(f(this.props)),this.observe()}UNSAFE_componentWillReceiveProps(e){let t=f(e);l(this.observer,t)||(this.unobserve(),this.observer=c(t),this.shouldReobserve=!0),this.props.disabled&&!e.disabled&&(this.shouldReobserve=!0),!this.props.disabled&&e.disabled&&this.unobserve()}componentDidUpdate(){this.shouldReobserve&&(this.observe(),this.shouldReobserve=!1)}componentWillUnmount(){this.unobserve()}observe(){this.props.disabled||h(this.observer,this.target,this.handleIntersect)}unobserve(){m(this.observer,this.target)}render(){return this.props.render?this.props.render({innerRef:this.handleTarget}):(0,s.cloneElement)(s.Children.only(this.props.children),{ref:this.handleTarget})}constructor(...e){super(...e),this.shouldReobserve=!1,this.handleTarget=e=>{if(null!==e&&"object"==typeof e&&!function(e){return e&&"function"==typeof e.getBoundingClientRect}(e))throw Error("Child did not forward the ref to a DOM element. Did you accidentally pass a class component?");this.target&&this.target!==e&&(this.unobserve(),this.shouldReobserve=!0),this.target=e},this.handleIntersect=e=>{this.props.onIntersect(e,this.props.value),this.props.once&&e.isIntersecting&&this.unobserve()}}}let f=e=>({root:e.root,rootMargin:e.rootMargin,threshold:e.threshold});function x(e){let{videoSrc:t,video:r,renderImage:a,src:o,alt:s}=e;return o?t||r?(0,n.jsx)("video",{autoPlay:!0,loop:!0,muted:!0,playsInline:!0,src:o}):a?a(e):(0,n.jsx)("img",{alt:s,src:o||null}):null}class y extends s.Component{static #e=this.defaultProps={lazy:!0};render(){let{caption:e,width:t,height:r,margin:a=40,video:s=!1,videoSrc:l,captionSpacing:p=null,renderImage:d,oversize:u=!0,float:c,lazy:h,shadow:m,style:f,...y}=this.props,k=`${String(r/t*100)}%`;return(0,n.jsx)(g,{disabled:!h,onIntersect:this.handleIntersect,once:!0,rootMargin:"20%",children:(0,n.jsxs)("figure",{className:o().dynamic([["622a55e2833827d7",[a,t?`width: ${t}px;`:"",m?"box-shadow: 0 8px 30px rgba(0,0,0,0.12)":"",t,a,a,t,c,a,c]]])+" "+((0,i.W)({oversize:t>650&&u,float:c&&t<520})||""),children:[(0,n.jsxs)("div",{className:o().dynamic([["622a55e2833827d7",[a,t?`width: ${t}px;`:"",m?"box-shadow: 0 8px 30px rgba(0,0,0,0.12)":"",t,a,a,t,c,a,c]]])+" container",children:[(0,n.jsx)("div",{style:{paddingBottom:k,...f},className:o().dynamic([["622a55e2833827d7",[a,t?`width: ${t}px;`:"",m?"box-shadow: 0 8px 30px rgba(0,0,0,0.12)":"",t,a,a,t,c,a,c]]]),children:(0,n.jsx)(x,{alt:y.alt,height:r,renderImage:d,video:s,videoSrc:l,width:t,...y,src:this.state.src})}),e?(0,n.jsx)("figcaption",{style:p?{marginTop:p}:{},className:o().dynamic([["622a55e2833827d7",[a,t?`width: ${t}px;`:"",m?"box-shadow: 0 8px 30px rgba(0,0,0,0.12)":"",t,a,a,t,c,a,c]]]),children:e}):null]}),(0,n.jsx)(o(),{id:"622a55e2833827d7",dynamic:[a,t?`width: ${t}px;`:"",m?"box-shadow: 0 8px 30px rgba(0,0,0,0.12)":"",t,a,a,t,c,a,c],children:`figure.__jsx-style-dynamic-selector{display:block;text-align:center;margin:${a}px 0}.container.__jsx-style-dynamic-selector{margin:0 auto;${t?`width: ${t}px;`:""}                max-width: 100%}@media screen and (max-width:320px){.container.__jsx-style-dynamic-selector{width:100%}}div.__jsx-style-dynamic-selector{-webkit-transform:translate3d(0,0,0);-moz-transform:translate3d(0,0,0);transform:translate3d(0,0,0);position:relative}figure.__jsx-style-dynamic-selector img,figure.__jsx-style-dynamic-selector video{height:100%;left:0;position:absolute;top:0;width:100%;${m?"box-shadow: 0 8px 30px rgba(0,0,0,0.12)":""}}figcaption.__jsx-style-dynamic-selector{color:#999;font-size:12px;margin:0;text-align:center}@media(min-width:1200px){figure.oversize.__jsx-style-dynamic-selector{width:${t}px;margin:${a}px 0 ${a}px -webkit-calc(((${t}px - 650px) / 2) * -1);margin:${a}px 0 ${a}px -moz-calc(((${t}px - 650px) / 2) * -1);margin:${a}px 0 ${a}px calc(((${t}px - 650px) / 2) * -1)}figure.float.__jsx-style-dynamic-selector{float:${c};margin:${a}px;margin-${c}:-150px}}`})]})})}constructor(...e){super(...e),this.state={src:this.props.lazy?void 0:this.props.videoSrc||this.props.src},this.handleIntersect=e=>{e.isIntersecting&&this.setState({src:this.props.videoSrc||this.props.src})}}}let k=function(e){return(0,n.jsx)(y,{...e,alt:""})}},83708:(e,t,r)=>{"use strict";r.d(t,{Z:()=>p});var n=r(58589),a=r(10628),o=r(49569);function s(e){let{href:t,children:r,...a}=e;return(0,n.jsx)("a",{href:t,rel:"noopener noreferrer",target:"_blank",...a,children:r})}var i=r(39434);function l(e){let{href:t,children:r,...a}=e,o=location.pathname||"",l=(0,i.t)(t,o);return(0,n.jsx)(s,{href:l,...a,"data-url":l,children:r})}function p(e){let{href:t,children:r,...i}=e,p=r||(t?`${o.z$}${t}`:o.mj),d=`${o.z$}${t||""}?utm_source=next-site&utm_medium=learnpages&utm_campaign=no-campaign`;return(0,n.jsx)(a.Suspense,{fallback:(0,n.jsx)(s,{href:d,...i,children:p}),children:(0,n.jsx)(l,{href:d,...i,children:p})})}},72272:(e,t,r)=>{"use strict";r.d(t,{Z:()=>a});var n=r(49569);function a(){return n.mj}},52397:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>m,meta:()=>u}),r(10628);var n=r(16942),a=r(18590),o=r(25928),s=r(83708),i=r(58589),l=r(49569);function p(e){let{href:t,children:r,...n}=e;return(0,i.jsx)("a",{href:`${l.z$}/docs/edge-network/overview`,rel:"noopener noreferrer",target:"_blank",...n,children:l.Uy})}var d=r(72272);let u={title:"Deploying Your Next.js App",courseId:"basics",lessonId:"deploying-nextjs-app",stepId:"platform-details",subtitle:`Next.js and ${l.mj}`},c={meta:u},h=e=>{let{children:t}=e;return(0,n.kt)(a.Z,{meta:u},t)};function m(e){let{components:t,...r}=e;return(0,n.kt)(h,{...c,...r,components:t,mdxType:"MDXLayout"},(0,n.kt)("p",null,(0,n.kt)(s.Z,{mdxType:"PlatformLink"})," is made by the creators of Next.js and has first-class support for Next.js. When you deploy your Next.js app to ",(0,n.kt)(d.Z,{mdxType:"PlatformText"}),", the following happens by default:"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"Pages that use ",(0,n.kt)("a",{parentName:"li",href:"/docs/basic-features/pages#static-generation-recommended"},"Static Generation")," and assets (JS, CSS, images, fonts, etc) will automatically be served from the ",(0,n.kt)(p,{mdxType:"PlatformCdnLink"}),", which is blazingly fast."),(0,n.kt)("li",{parentName:"ul"},"Pages that use ",(0,n.kt)("a",{parentName:"li",href:"/docs/basic-features/pages#server-side-rendering"},"Server-Side Rendering")," and ",(0,n.kt)("a",{parentName:"li",href:"/docs/api-routes/introduction"},"API routes")," will automatically become isolated ",(0,n.kt)(s.Z,{href:"/docs/serverless-functions/introduction",mdxType:"PlatformLink"},"Serverless Functions"),". This allows page rendering and API requests to scale infinitely.")),(0,n.kt)("p",null,(0,n.kt)(d.Z,{mdxType:"PlatformText"})," has many more features, such as:"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("strong",{parentName:"li"},"Custom Domains:")," Once deployed on ",(0,n.kt)(d.Z,{mdxType:"PlatformText"}),", you can assign a custom domain to your Next.js app. Take a look at ",(0,n.kt)(s.Z,{href:"/docs/concepts/projects/custom-domains",mdxType:"PlatformLink"},"our documentation")," here."),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("strong",{parentName:"li"},"Environment Variables:")," You can also set environment variables on ",(0,n.kt)(d.Z,{mdxType:"PlatformText"}),". Take a look at ",(0,n.kt)(s.Z,{href:"/docs/build-step#environment-variables",mdxType:"PlatformLink"},"our documentation")," here. You can then ",(0,n.kt)("a",{parentName:"li",href:"/docs/basic-features/environment-variables#loading-environment-variables"},"use those environment variables")," in your Next.js app."),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("strong",{parentName:"li"},"Automatic HTTPS:")," HTTPS is enabled by default (including custom domains) and doesn't require extra configuration. We auto-renew SSL certificates.")),(0,n.kt)("p",null,"You can learn more about the platform in the ",(0,n.kt)(s.Z,{href:"/docs",mdxType:"PlatformLink"},(0,n.kt)(d.Z,{mdxType:"PlatformText"})," documentation"),"."),(0,n.kt)("h3",null,"Preview Deployment for Every Push"),(0,n.kt)("blockquote",null,(0,n.kt)("p",{parentName:"blockquote"},"The steps below are ",(0,n.kt)("strong",{parentName:"p"},"optional"),` — you can try it or just read it through.`)),(0,n.kt)("p",null,"After deploying to ",(0,n.kt)(d.Z,{mdxType:"PlatformText"}),", try doing the following if you can:"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"Create a new ",(0,n.kt)("strong",{parentName:"li"},"branch")," on your app."),(0,n.kt)("li",{parentName:"ul"},"Make some changes and push to GitHub."),(0,n.kt)("li",{parentName:"ul"},"Create a new ",(0,n.kt)("strong",{parentName:"li"},"pull request")," (",(0,n.kt)("a",{parentName:"li",href:"https://help.github.com/en/github/collaborating-with-issues-and-pull-requests/creating-a-pull-request"},"GitHub help page"),").")),(0,n.kt)("p",null,"You should see a comment by the ",(0,n.kt)("inlineCode",{parentName:"p"},"vercel")," bot on the pull request page."),(0,n.kt)(o.Z,{shadow:!0,alt:"Preview Deployment URL",oversize:!1,src:"/static/images/learn/deploying-nextjs-app/vercel-bot.png",width:389,height:64,mdxType:"Image"}),(0,n.kt)("p",null,"Try clicking on the ",(0,n.kt)("strong",{parentName:"p"},"Preview")," URL inside this comment. You should see the changes you just made."),(0,n.kt)("p",null,"When you have a pull request open, ",(0,n.kt)(d.Z,{mdxType:"PlatformText"})," automatically creates a ",(0,n.kt)("strong",{parentName:"p"},"preview deployment")," for that branch on every push. The preview URL will always point to the latest preview deployment."),(0,n.kt)("p",null,"You can share this preview URL with your collaborators and get immediate feedback."),(0,n.kt)("p",null,"If your preview deployment looks good, ",(0,n.kt)("strong",{parentName:"p"},"merge it to ",(0,n.kt)("inlineCode",{parentName:"strong"},"main")),". When you do this, ",(0,n.kt)(d.Z,{mdxType:"PlatformText"})," automatically creates a production deployment."),(0,n.kt)("h3",null,"Develop, Preview, Ship"),(0,n.kt)("p",null,`We’ve just gone through the workflow we call `,(0,n.kt)("strong",{parentName:"p"},"DPS"),": ",(0,n.kt)("strong",{parentName:"p"},"D"),"evelop, ",(0,n.kt)("strong",{parentName:"p"},"P"),"review, and ",(0,n.kt)("strong",{parentName:"p"},"S"),"hip."),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("strong",{parentName:"li"},"Develop"),`: We’ve written code in Next.js and used the Next.js development server running to take advantage of its hot reloading feature.`),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("strong",{parentName:"li"},"Preview"),`: We’ve pushed changes to a branch on GitHub, and `,(0,n.kt)(d.Z,{mdxType:"PlatformText"}),` created a preview deployment that’s available via a URL. We can share this preview URL with others for feedback. In addition to doing `,(0,n.kt)("em",{parentName:"li"},"code reviews"),", you can do ",(0,n.kt)("em",{parentName:"li"},"deployment previews"),"."),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("strong",{parentName:"li"},"Ship"),`: We’ve merged the pull request to `,(0,n.kt)("inlineCode",{parentName:"li"},"main")," to ship to production.")),(0,n.kt)("p",null,`We strongly recommend using this workflow when developing Next.js apps — it will help you iterate on your app faster.`))}m.isMDXComponent=!0}},e=>{var t=t=>e(e.s=t);e.O(0,[27,8746,4371,2878,4730,1324,1067,8590,2888,9774,179],()=>t(67113)),_N_E=e.O()}]);