(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[138],{15583:(e,t,n)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/learn-pages-router/seo/monitor/custom-reporting",function(){return n(13913)}])},25928:(e,t,n)=>{"use strict";n.d(t,{Z:()=>y});var s=n(58589),r=n(51853),o=n.n(r),a=n(10628),i=n(14517);function l(e,t){return d(t.root,e.root)&&d(t.rootMargin,e.rootMargin)&&d(t.threshold,e.thresholds)}function c(e){if(!/^-?\d*\.?\d+(?:px|%)$/.test(e))throw Error("rootMargin must be specified as a CSS margin property")}function d(e,t){return Array.isArray(e)&&Array.isArray(t)&&e.length===t.length?e.every((n,s)=>d(e[s],t[s])):e===t}n(81324);let p=function(){let e=new Map;function t(t){return e.has(t)?e.get(t):e.set(t,new Map).get(t)}function n(e,n){for(let s of e){let e=t(n).get(s.target);e&&e(s)}}return{getObserver:function(t){return function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=function(){var e;let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{root:t.root||null,rootMargin:function(e){let t=(e||"0px").trim().split(/\s+/);return t.forEach(c),t[1]=t[1]||t[0],t[2]=t[2]||t[0],t[3]=t[3]||t[1],t.join(" ")}(t.rootMargin),threshold:Array.isArray(e=t.threshold)?e:[void 0!==e?e:0]}}(t);for(let t of e.keys())if(l(t,n))return t;return null}(t)||new IntersectionObserver(n,t)},observeTarget:function(e,n,s){t(e).set(n,s),e.observe(n)},unobserveTarget:function(e,n){t(e).delete(n),e.unobserve(n)}}}(),{getObserver:h}=p,{observeTarget:u}=p,{unobserveTarget:m}=p;class x extends a.Component{static #e=this.defaultProps={disabled:!1,once:!1};componentDidMount(){this.observer=h(f(this.props)),this.observe()}UNSAFE_componentWillReceiveProps(e){let t=f(e);l(this.observer,t)||(this.unobserve(),this.observer=h(t),this.shouldReobserve=!0),this.props.disabled&&!e.disabled&&(this.shouldReobserve=!0),!this.props.disabled&&e.disabled&&this.unobserve()}componentDidUpdate(){this.shouldReobserve&&(this.observe(),this.shouldReobserve=!1)}componentWillUnmount(){this.unobserve()}observe(){this.props.disabled||u(this.observer,this.target,this.handleIntersect)}unobserve(){m(this.observer,this.target)}render(){return this.props.render?this.props.render({innerRef:this.handleTarget}):(0,a.cloneElement)(a.Children.only(this.props.children),{ref:this.handleTarget})}constructor(...e){super(...e),this.shouldReobserve=!1,this.handleTarget=e=>{if(null!==e&&"object"==typeof e&&!function(e){return e&&"function"==typeof e.getBoundingClientRect}(e))throw Error("Child did not forward the ref to a DOM element. Did you accidentally pass a class component?");this.target&&this.target!==e&&(this.unobserve(),this.shouldReobserve=!0),this.target=e},this.handleIntersect=e=>{this.props.onIntersect(e,this.props.value),this.props.once&&e.isIntersecting&&this.unobserve()}}}let f=e=>({root:e.root,rootMargin:e.rootMargin,threshold:e.threshold});function g(e){let{videoSrc:t,video:n,renderImage:r,src:o,alt:a}=e;return o?t||n?(0,s.jsx)("video",{autoPlay:!0,loop:!0,muted:!0,playsInline:!0,src:o}):r?r(e):(0,s.jsx)("img",{alt:a,src:o||null}):null}class b extends a.Component{static #e=this.defaultProps={lazy:!0};render(){let{caption:e,width:t,height:n,margin:r=40,video:a=!1,videoSrc:l,captionSpacing:c=null,renderImage:d,oversize:p=!0,float:h,lazy:u,shadow:m,style:f,...b}=this.props,y=`${String(n/t*100)}%`;return(0,s.jsx)(x,{disabled:!u,onIntersect:this.handleIntersect,once:!0,rootMargin:"20%",children:(0,s.jsxs)("figure",{className:o().dynamic([["622a55e2833827d7",[r,t?`width: ${t}px;`:"",m?"box-shadow: 0 8px 30px rgba(0,0,0,0.12)":"",t,r,r,t,h,r,h]]])+" "+((0,i.W)({oversize:t>650&&p,float:h&&t<520})||""),children:[(0,s.jsxs)("div",{className:o().dynamic([["622a55e2833827d7",[r,t?`width: ${t}px;`:"",m?"box-shadow: 0 8px 30px rgba(0,0,0,0.12)":"",t,r,r,t,h,r,h]]])+" container",children:[(0,s.jsx)("div",{style:{paddingBottom:y,...f},className:o().dynamic([["622a55e2833827d7",[r,t?`width: ${t}px;`:"",m?"box-shadow: 0 8px 30px rgba(0,0,0,0.12)":"",t,r,r,t,h,r,h]]]),children:(0,s.jsx)(g,{alt:b.alt,height:n,renderImage:d,video:a,videoSrc:l,width:t,...b,src:this.state.src})}),e?(0,s.jsx)("figcaption",{style:c?{marginTop:c}:{},className:o().dynamic([["622a55e2833827d7",[r,t?`width: ${t}px;`:"",m?"box-shadow: 0 8px 30px rgba(0,0,0,0.12)":"",t,r,r,t,h,r,h]]]),children:e}):null]}),(0,s.jsx)(o(),{id:"622a55e2833827d7",dynamic:[r,t?`width: ${t}px;`:"",m?"box-shadow: 0 8px 30px rgba(0,0,0,0.12)":"",t,r,r,t,h,r,h],children:`figure.__jsx-style-dynamic-selector{display:block;text-align:center;margin:${r}px 0}.container.__jsx-style-dynamic-selector{margin:0 auto;${t?`width: ${t}px;`:""}                max-width: 100%}@media screen and (max-width:320px){.container.__jsx-style-dynamic-selector{width:100%}}div.__jsx-style-dynamic-selector{-webkit-transform:translate3d(0,0,0);-moz-transform:translate3d(0,0,0);transform:translate3d(0,0,0);position:relative}figure.__jsx-style-dynamic-selector img,figure.__jsx-style-dynamic-selector video{height:100%;left:0;position:absolute;top:0;width:100%;${m?"box-shadow: 0 8px 30px rgba(0,0,0,0.12)":""}}figcaption.__jsx-style-dynamic-selector{color:#999;font-size:12px;margin:0;text-align:center}@media(min-width:1200px){figure.oversize.__jsx-style-dynamic-selector{width:${t}px;margin:${r}px 0 ${r}px -webkit-calc(((${t}px - 650px) / 2) * -1);margin:${r}px 0 ${r}px -moz-calc(((${t}px - 650px) / 2) * -1);margin:${r}px 0 ${r}px calc(((${t}px - 650px) / 2) * -1)}figure.float.__jsx-style-dynamic-selector{float:${h};margin:${r}px;margin-${h}:-150px}}`})]})})}constructor(...e){super(...e),this.state={src:this.props.lazy?void 0:this.props.videoSrc||this.props.src},this.handleIntersect=e=>{e.isIntersecting&&this.setState({src:this.props.videoSrc||this.props.src})}}}let y=function(e){return(0,s.jsx)(b,{...e,alt:""})}},21565:(e,t,n)=>{"use strict";n.d(t,{H3:()=>a,H4:()=>i,H5:()=>l});var s=n(58589),r=n(51853),o=n.n(r);function a(e){let{children:t}=e;return(0,s.jsxs)("h3",{className:"jsx-f28bd670423c9152",children:[t,(0,s.jsx)(o(),{id:"f28bd670423c9152",children:"h3.jsx-f28bd670423c9152{font-weight:bold;font-size:18px}h3.jsx-f28bd670423c9152 code{margin-left:6px;margin-right:6px}"})]})}function i(e){let{children:t,isCommand:n}=e;return(0,s.jsxs)("h4",{className:"jsx-b2c93fc58f79b843 "+((n?"command":"")||""),children:[t,(0,s.jsx)(o(),{id:"b2c93fc58f79b843",children:"h4.jsx-b2c93fc58f79b843{font-weight:bold;font-size:16px}.command.jsx-b2c93fc58f79b843{color:#bd10e0;font-family:Menlo,Monaco,Lucida Console,Liberation Mono,DejaVu Sans Mono,Bitstream Vera Sans Mono,Courier New,monospace,serif;font-size:.9em}h4.jsx-b2c93fc58f79b843 code{margin-left:6px;margin-right:6px}"})]})}function l(e){let{children:t}=e;return(0,s.jsxs)("h5",{className:"jsx-ed7f7d0730484ac7",children:[t,(0,s.jsx)(o(),{id:"ed7f7d0730484ac7",children:"h5.jsx-ed7f7d0730484ac7{font-weight:bold;font-size:15px}h5.jsx-ed7f7d0730484ac7 code{margin-left:6px;margin-right:6px}"})]})}},55272:(e,t,n)=>{"use strict";n.d(t,{mj:()=>d});var s=n(58589),r=n(51853),o=n.n(r),a=n(14517),i=n(77400),l=n(43206),c=n.n(l);function d(e){return!e.href.startsWith("/")||e.href.startsWith("/docs")||e.href.startsWith("/api")?e.href.includes("@")||e.href.startsWith("#")?(0,s.jsx)(h,{...e}):(0,s.jsx)(u,{...e}):(0,s.jsx)(p,{...e})}function p(e){let{href:t,as:n="",children:r,error:o=!1,underlineOnHover:l=!0}=e;return(0,s.jsx)(i.r,{as:n,className:(0,a.W)(c().link,{[c().error]:o,[c().hoverUnderline]:l}),href:t,children:r})}function h(e){let{href:t,onClick:n,children:r,underlineOnHover:a=!0}=e;return(0,s.jsxs)("a",{href:t,onClick:n,className:o().dynamic([["66cb3865d5d5c397",[a?"underline":"none"]]]),children:[r,(0,s.jsx)(o(),{id:"66cb3865d5d5c397",dynamic:[a?"underline":"none"],children:`a.__jsx-style-dynamic-selector{text-decoration:none;color:#0070f3;font-size:inherit;cursor:pointer}a.__jsx-style-dynamic-selector:hover{-webkit-text-decoration:${a?"underline":"none"};-moz-text-decoration:${a?"underline":"none"};text-decoration:${a?"underline":"none"}}`})]})}function u(e){let{href:t,children:n}=e;return(0,s.jsxs)("a",{href:t,rel:"noopener noreferrer",target:"_blank",className:"jsx-3da361ed9bbc2b1",children:[n,(0,s.jsx)(o(),{id:"3da361ed9bbc2b1",children:"a.jsx-3da361ed9bbc2b1{text-decoration:none;color:#0070f3;font-size:inherit}a.jsx-3da361ed9bbc2b1:hover{text-decoration:underline}"})]})}},79379:(e,t,n)=>{"use strict";n.d(t,{LI:()=>d,OL:()=>c,UL:()=>l});var s=n(58589),r=n(51853),o=n.n(r),a=n(69480),i=n.n(a);function l(e){let{children:t}=e;return(0,s.jsxs)("ul",{className:"jsx-571896de3ffb79ac",children:[t,(0,s.jsx)(o(),{id:"571896de3ffb79ac",children:'ul.jsx-571896de3ffb79ac{padding:0;list-style-type:none;margin-left:15px}ul.jsx-571896de3ffb79ac>li::before{content:"-";display:inline-block;color:#999;position:absolute;margin-left:-15px}'})]})}function c(e){let{children:t}=e;return(0,s.jsxs)("ol",{className:"jsx-fb2728ad24ced75e",children:[t,(0,s.jsx)(o(),{id:"fb2728ad24ced75e",children:"ol.jsx-fb2728ad24ced75e{padding:0;margin-left:15px}"})]})}function d(e){let{children:t,fontSize:n}=e;return(0,s.jsxs)("li",{className:o().dynamic([["255614beb736b7eb",[n||"14px"]]]),children:[t,(0,s.jsx)(o(),{id:"255614beb736b7eb",dynamic:[n||"14px"],children:`li.__jsx-style-dynamic-selector{${n||"14px"};line-height:24px;margin-bottom:10px}`})]})}l.propTypes={children:i().oneOfType([i().arrayOf(i().node),i().node])},c.propTypes={children:i().oneOfType([i().arrayOf(i().node),i().node])},d.propTypes={children:i().oneOfType([i().arrayOf(i().node),i().node]),fontSize:i().string}},92797:(e,t,n)=>{"use strict";n.d(t,{P:()=>l});var s=n(58589),r=n(51853),o=n.n(r),a=n(69480),i=n.n(a);function l(e){let{className:t="",children:n,large:r,fontSize:a}=e;return(0,s.jsxs)("p",{className:o().dynamic([["e913e368ec7c4317",[a||(r?"18px":"14px")]]])+" "+(t||""),children:[n,(0,s.jsx)(o(),{id:"e913e368ec7c4317",dynamic:[a||(r?"18px":"14px")],children:`p.__jsx-style-dynamic-selector{font-weight:400;font-size:${a||(r?"18px":"14px")};line-height:24px}`})]})}function c(e){let{children:t}=e;return(0,s.jsxs)("span",{className:"jsx-4a4877b22e18241e",children:[t,(0,s.jsx)(o(),{id:"4a4877b22e18241e",children:"span.jsx-4a4877b22e18241e{font-weight:600}"})]})}l.propTypes={className:i().string,large:i().bool,children:i().oneOfType([i().arrayOf(i().node),i().node]),fontSize:i().string},i().oneOfType([i().arrayOf(i().node),i().node]),c.propTypes={children:i().oneOfType([i().arrayOf(i().node),i().node])},i().oneOfType([i().arrayOf(i().node),i().node]),l.B=c},13913:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>h,meta:()=>c}),n(10628);var s=n(16942),r=n(18590),o=n(79379),a=n(21565),i=n(92797),l=n(55272);n(25928);let c={title:"Monitoring your Core Web Vitals",courseId:"seo",lessonId:"monitor",stepId:"custom-reporting",subtitle:"Custom Reporting"},d={meta:c},p=e=>{let{children:t}=e;return(0,s.kt)(r.Z,{meta:c},t)};function h(e){let{components:t,...n}=e;return(0,s.kt)(p,{...d,...n,components:t,mdxType:"MDXLayout"},(0,s.kt)(i.P,{fontSize:"16px",mdxType:"P"},"It is also possible to use the built-in relayer Next.js Speed Insights uses and send the data to your own service or push them to Google Analytics."),(0,s.kt)(i.P,{fontSize:"16px",mdxType:"P"},"Let's look at how we might add that now. We can add it to the demo app we have been optimizing."),(0,s.kt)(i.P,{fontSize:"16px",mdxType:"P"},"We will use a ",(0,s.kt)("code",null,"console.log")," to look at the metrics in real time."),(0,s.kt)(i.P,{fontSize:"16px",mdxType:"P"},"To do this we can leverage the ",(0,s.kt)("code",null,"reportWebVitals")," function provided by Next.js"),(0,s.kt)("div",{style:{width:"90%",margin:"0 auto",padding:"20px",textAlign:"center",borderRadius:"10px",backgroundColor:"#F3F3F3"}},(0,s.kt)(i.P,{fontSize:"16px",mdxType:"P"},(0,s.kt)("strong",null,"Note:")," This is NOT necessary if you’ve just finished the previous lessons.")),(0,s.kt)("pre",{className:"language-bash"},(0,s.kt)("code",{parentName:"pre",className:"language-bash"},"npx create-next-app@latest nextjs-lighthouse --use-npm --example ",(0,s.kt)("span",{parentName:"code",className:"token string"},'"https://github.com/vercel/next-learn/tree/main/seo"'),`
`)),(0,s.kt)(i.P,{fontSize:"16px",mdxType:"P"},"Open ",(0,s.kt)("code",null,"pages/_app.js")," and export the following function:"),(0,s.kt)("pre",{className:"language-jsx"},(0,s.kt)("code",{parentName:"pre",className:"language-jsx"},(0,s.kt)("span",{parentName:"code",className:"token keyword module"},"export")," ",(0,s.kt)("span",{parentName:"code",className:"token keyword"},"function")," ",(0,s.kt)("span",{parentName:"code",className:"token function"},"reportWebVitals"),(0,s.kt)("span",{parentName:"code",className:"token punctuation"},"("),(0,s.kt)("span",{parentName:"code",className:"token parameter"},"metric"),(0,s.kt)("span",{parentName:"code",className:"token punctuation"},")")," ",(0,s.kt)("span",{parentName:"code",className:"token punctuation"},"{"),`
  `,(0,s.kt)("span",{parentName:"code",className:"token console class-name"},"console"),(0,s.kt)("span",{parentName:"code",className:"token punctuation"},"."),(0,s.kt)("span",{parentName:"code",className:"token method function property-access"},"log"),(0,s.kt)("span",{parentName:"code",className:"token punctuation"},"("),"metric",(0,s.kt)("span",{parentName:"code",className:"token punctuation"},")"),(0,s.kt)("span",{parentName:"code",className:"token punctuation"},";"),`
`,(0,s.kt)("span",{parentName:"code",className:"token punctuation"},"}"),`
`)),(0,s.kt)(i.P,{fontSize:"16px",mdxType:"P"},"Then build and start your application:"),(0,s.kt)("pre",{className:"language-bash"},(0,s.kt)("code",{parentName:"pre",className:"language-bash"},(0,s.kt)("span",{parentName:"code",className:"token function"},"npm")," run build ",(0,s.kt)("span",{parentName:"code",className:"token operator"},"&&")," ",(0,s.kt)("span",{parentName:"code",className:"token function"},"npm"),` run start
`)),(0,s.kt)(i.P,{fontSize:"16px",mdxType:"P"},"If you open up Chrome, you will see the metrics inside the DevTools console. You will also notice that ",(0,s.kt)("strong",null,"FID")," will only trigger once you interact with the page."),(0,s.kt)("br",null),(0,s.kt)("div",{style:{width:"100%",padding:"30px 20px",borderRadius:"10px",background:"#F3F3F3"}},(0,s.kt)(a.H3,{mdxType:"H3"},"Further Reading"),(0,s.kt)(o.UL,{mdxType:"UL"},(0,s.kt)(o.LI,{fontSize:"16px",mdxType:"LI"},(0,s.kt)("span",null,"Next.js:  "),(0,s.kt)(l.mj,{href:"/docs/advanced-features/measuring-performance",mdxType:"Link"},"Measuring Performance")))))}h.isMDXComponent=!0},43206:e=>{e.exports={link:"link_link__URfhR",error:"link_error__N26vQ",hoverUnderline:"link_hoverUnderline__BVku1"}}},e=>{var t=t=>e(e.s=t);e.O(0,[27,8746,4371,2878,4730,1324,1067,8590,2888,9774,179],()=>t(15583)),_N_E=e.O()}]);