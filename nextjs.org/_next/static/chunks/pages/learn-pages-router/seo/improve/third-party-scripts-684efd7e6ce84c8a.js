(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[704],{53164:(e,a,n)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/learn-pages-router/seo/improve/third-party-scripts",function(){return n(73261)}])},21565:(e,a,n)=>{"use strict";n.d(a,{H3:()=>p,H4:()=>r,H5:()=>c});var t=n(58589),s=n(51853),o=n.n(s);function p(e){let{children:a}=e;return(0,t.jsxs)("h3",{className:"jsx-f28bd670423c9152",children:[a,(0,t.jsx)(o(),{id:"f28bd670423c9152",children:"h3.jsx-f28bd670423c9152{font-weight:bold;font-size:18px}h3.jsx-f28bd670423c9152 code{margin-left:6px;margin-right:6px}"})]})}function r(e){let{children:a,isCommand:n}=e;return(0,t.jsxs)("h4",{className:"jsx-b2c93fc58f79b843 "+((n?"command":"")||""),children:[a,(0,t.jsx)(o(),{id:"b2c93fc58f79b843",children:"h4.jsx-b2c93fc58f79b843{font-weight:bold;font-size:16px}.command.jsx-b2c93fc58f79b843{color:#bd10e0;font-family:Menlo,Monaco,Lucida Console,Liberation Mono,DejaVu Sans Mono,Bitstream Vera Sans Mono,Courier New,monospace,serif;font-size:.9em}h4.jsx-b2c93fc58f79b843 code{margin-left:6px;margin-right:6px}"})]})}function c(e){let{children:a}=e;return(0,t.jsxs)("h5",{className:"jsx-ed7f7d0730484ac7",children:[a,(0,t.jsx)(o(),{id:"ed7f7d0730484ac7",children:"h5.jsx-ed7f7d0730484ac7{font-weight:bold;font-size:15px}h5.jsx-ed7f7d0730484ac7 code{margin-left:6px;margin-right:6px}"})]})}},55272:(e,a,n)=>{"use strict";n.d(a,{mj:()=>l});var t=n(58589),s=n(51853),o=n.n(s),p=n(14517),r=n(77400),c=n(43206),i=n.n(c);function l(e){return!e.href.startsWith("/")||e.href.startsWith("/docs")||e.href.startsWith("/api")?e.href.includes("@")||e.href.startsWith("#")?(0,t.jsx)(d,{...e}):(0,t.jsx)(k,{...e}):(0,t.jsx)(m,{...e})}function m(e){let{href:a,as:n="",children:s,error:o=!1,underlineOnHover:c=!0}=e;return(0,t.jsx)(r.r,{as:n,className:(0,p.W)(i().link,{[i().error]:o,[i().hoverUnderline]:c}),href:a,children:s})}function d(e){let{href:a,onClick:n,children:s,underlineOnHover:p=!0}=e;return(0,t.jsxs)("a",{href:a,onClick:n,className:o().dynamic([["66cb3865d5d5c397",[p?"underline":"none"]]]),children:[s,(0,t.jsx)(o(),{id:"66cb3865d5d5c397",dynamic:[p?"underline":"none"],children:`a.__jsx-style-dynamic-selector{text-decoration:none;color:#0070f3;font-size:inherit;cursor:pointer}a.__jsx-style-dynamic-selector:hover{-webkit-text-decoration:${p?"underline":"none"};-moz-text-decoration:${p?"underline":"none"};text-decoration:${p?"underline":"none"}}`})]})}function k(e){let{href:a,children:n}=e;return(0,t.jsxs)("a",{href:a,rel:"noopener noreferrer",target:"_blank",className:"jsx-3da361ed9bbc2b1",children:[n,(0,t.jsx)(o(),{id:"3da361ed9bbc2b1",children:"a.jsx-3da361ed9bbc2b1{text-decoration:none;color:#0070f3;font-size:inherit}a.jsx-3da361ed9bbc2b1:hover{text-decoration:underline}"})]})}},79379:(e,a,n)=>{"use strict";n.d(a,{LI:()=>l,OL:()=>i,UL:()=>c});var t=n(58589),s=n(51853),o=n.n(s),p=n(69480),r=n.n(p);function c(e){let{children:a}=e;return(0,t.jsxs)("ul",{className:"jsx-571896de3ffb79ac",children:[a,(0,t.jsx)(o(),{id:"571896de3ffb79ac",children:'ul.jsx-571896de3ffb79ac{padding:0;list-style-type:none;margin-left:15px}ul.jsx-571896de3ffb79ac>li::before{content:"-";display:inline-block;color:#999;position:absolute;margin-left:-15px}'})]})}function i(e){let{children:a}=e;return(0,t.jsxs)("ol",{className:"jsx-fb2728ad24ced75e",children:[a,(0,t.jsx)(o(),{id:"fb2728ad24ced75e",children:"ol.jsx-fb2728ad24ced75e{padding:0;margin-left:15px}"})]})}function l(e){let{children:a,fontSize:n}=e;return(0,t.jsxs)("li",{className:o().dynamic([["255614beb736b7eb",[n||"14px"]]]),children:[a,(0,t.jsx)(o(),{id:"255614beb736b7eb",dynamic:[n||"14px"],children:`li.__jsx-style-dynamic-selector{${n||"14px"};line-height:24px;margin-bottom:10px}`})]})}c.propTypes={children:r().oneOfType([r().arrayOf(r().node),r().node])},i.propTypes={children:r().oneOfType([r().arrayOf(r().node),r().node])},l.propTypes={children:r().oneOfType([r().arrayOf(r().node),r().node]),fontSize:r().string}},92797:(e,a,n)=>{"use strict";n.d(a,{P:()=>c});var t=n(58589),s=n(51853),o=n.n(s),p=n(69480),r=n.n(p);function c(e){let{className:a="",children:n,large:s,fontSize:p}=e;return(0,t.jsxs)("p",{className:o().dynamic([["e913e368ec7c4317",[p||(s?"18px":"14px")]]])+" "+(a||""),children:[n,(0,t.jsx)(o(),{id:"e913e368ec7c4317",dynamic:[p||(s?"18px":"14px")],children:`p.__jsx-style-dynamic-selector{font-weight:400;font-size:${p||(s?"18px":"14px")};line-height:24px}`})]})}function i(e){let{children:a}=e;return(0,t.jsxs)("span",{className:"jsx-4a4877b22e18241e",children:[a,(0,t.jsx)(o(),{id:"4a4877b22e18241e",children:"span.jsx-4a4877b22e18241e{font-weight:600}"})]})}c.propTypes={className:r().string,large:r().bool,children:r().oneOfType([r().arrayOf(r().node),r().node]),fontSize:r().string},r().oneOfType([r().arrayOf(r().node),r().node]),i.propTypes={children:r().oneOfType([r().arrayOf(r().node),r().node])},r().oneOfType([r().arrayOf(r().node),r().node]),c.B=i},73261:(e,a,n)=>{"use strict";n.r(a),n.d(a,{default:()=>d,meta:()=>i}),n(10628);var t=n(16942),s=n(18590),o=n(79379),p=n(21565),r=n(92797),c=n(55272);let i={title:"Improving your Core Web Vitals",courseId:"seo",lessonId:"improve",stepId:"third-party-scripts",subtitle:"Optimizing Third-Party Scripts"},l={meta:i},m=e=>{let{children:a}=e;return(0,t.kt)(s.Z,{meta:i},a)};function d(e){let{components:a,...n}=e;return(0,t.kt)(m,{...l,...n,components:a,mdxType:"MDXLayout"},(0,t.kt)(r.P,{fontSize:"16px",mdxType:"P"},"Many applications rely on third-party JavaScript to include different types of functionality, such as analytics, ads, and customer support widgets. However, embedding third-party authored code can delay page content from rendering and affect user performance if it is loaded too early."),(0,t.kt)(r.P,{fontSize:"16px",mdxType:"P"},"Next.js provides a built-in"," ",(0,t.kt)(c.mj,{href:"/docs/basic-features/font-optimization",mdxType:"Link"},"Script component")," ","that optimizes loading for any third-party script, while giving developers the option to decide when to fetch and execute it."),(0,t.kt)("h3",null,"Using the Script Component"),(0,t.kt)(r.P,{fontSize:"16px",mdxType:"P"},"Using regular HTML, external scripts would need to be manually appended to"," ",(0,t.kt)("code",null,"next/head"),":"),(0,t.kt)("pre",{className:"language-jsx"},(0,t.kt)("code",{parentName:"pre",className:"language-jsx"},(0,t.kt)("span",{parentName:"code",className:"token keyword module"},"import")," ",(0,t.kt)("span",{parentName:"code",className:"token imports"},(0,t.kt)("span",{parentName:"span",className:"token maybe-class-name"},"Head"))," ",(0,t.kt)("span",{parentName:"code",className:"token keyword module"},"from")," ",(0,t.kt)("span",{parentName:"code",className:"token string"},"'next/head'"),(0,t.kt)("span",{parentName:"code",className:"token punctuation"},";"),`

`,(0,t.kt)("span",{parentName:"code",className:"token keyword"},"function")," ",(0,t.kt)("span",{parentName:"code",className:"token function"},(0,t.kt)("span",{parentName:"span",className:"token maybe-class-name"},"IndexPage")),(0,t.kt)("span",{parentName:"code",className:"token punctuation"},"("),(0,t.kt)("span",{parentName:"code",className:"token punctuation"},")")," ",(0,t.kt)("span",{parentName:"code",className:"token punctuation"},"{"),`
  `,(0,t.kt)("span",{parentName:"code",className:"token keyword control-flow"},"return")," ",(0,t.kt)("span",{parentName:"code",className:"token punctuation"},"("),`
    `,(0,t.kt)("span",{parentName:"code",className:"token tag"},(0,t.kt)("span",{parentName:"span",className:"token tag"},(0,t.kt)("span",{parentName:"span",className:"token punctuation"},"<"),"div"),(0,t.kt)("span",{parentName:"span",className:"token punctuation"},">")),(0,t.kt)("span",{parentName:"code",className:"token plain-text"},`
      `),(0,t.kt)("span",{parentName:"code",className:"token tag"},(0,t.kt)("span",{parentName:"span",className:"token tag"},(0,t.kt)("span",{parentName:"span",className:"token punctuation"},"<"),(0,t.kt)("span",{parentName:"span",className:"token class-name"},"Head")),(0,t.kt)("span",{parentName:"span",className:"token punctuation"},">")),(0,t.kt)("span",{parentName:"code",className:"token plain-text"},`
        `),(0,t.kt)("span",{parentName:"code",className:"token tag"},(0,t.kt)("span",{parentName:"span",className:"token tag"},(0,t.kt)("span",{parentName:"span",className:"token punctuation"},"<"),"script")," ",(0,t.kt)("span",{parentName:"span",className:"token attr-name"},"src"),(0,t.kt)("span",{parentName:"span",className:"token attr-value"},(0,t.kt)("span",{parentName:"span",className:"token punctuation attr-equals"},"="),(0,t.kt)("span",{parentName:"span",className:"token punctuation"},'"'),"https://www.googletagmanager.com/gtag/js?id=123",(0,t.kt)("span",{parentName:"span",className:"token punctuation"},'"'))," ",(0,t.kt)("span",{parentName:"span",className:"token punctuation"},"/>")),(0,t.kt)("span",{parentName:"code",className:"token plain-text"},`
      `),(0,t.kt)("span",{parentName:"code",className:"token tag"},(0,t.kt)("span",{parentName:"span",className:"token tag"},(0,t.kt)("span",{parentName:"span",className:"token punctuation"},"</"),(0,t.kt)("span",{parentName:"span",className:"token class-name"},"Head")),(0,t.kt)("span",{parentName:"span",className:"token punctuation"},">")),(0,t.kt)("span",{parentName:"code",className:"token plain-text"},`
    `),(0,t.kt)("span",{parentName:"code",className:"token tag"},(0,t.kt)("span",{parentName:"span",className:"token tag"},(0,t.kt)("span",{parentName:"span",className:"token punctuation"},"</"),"div"),(0,t.kt)("span",{parentName:"span",className:"token punctuation"},">")),`
  `,(0,t.kt)("span",{parentName:"code",className:"token punctuation"},")"),(0,t.kt)("span",{parentName:"code",className:"token punctuation"},";"),`
`,(0,t.kt)("span",{parentName:"code",className:"token punctuation"},"}"),`
`)),(0,t.kt)(r.P,{fontSize:"16px",mdxType:"P"},"With the Next.js Script component, you can add it anywhere in the component without needing to use",(0,t.kt)("code",null,"next/head"),":"),(0,t.kt)("pre",{className:"language-jsx"},(0,t.kt)("code",{parentName:"pre",className:"language-jsx"},(0,t.kt)("span",{parentName:"code",className:"token keyword module"},"import")," ",(0,t.kt)("span",{parentName:"code",className:"token imports"},(0,t.kt)("span",{parentName:"span",className:"token maybe-class-name"},"Script"))," ",(0,t.kt)("span",{parentName:"code",className:"token keyword module"},"from")," ",(0,t.kt)("span",{parentName:"code",className:"token string"},"'next/script'"),(0,t.kt)("span",{parentName:"code",className:"token punctuation"},";"),`

`,(0,t.kt)("span",{parentName:"code",className:"token keyword"},"function")," ",(0,t.kt)("span",{parentName:"code",className:"token function"},(0,t.kt)("span",{parentName:"span",className:"token maybe-class-name"},"IndexPage")),(0,t.kt)("span",{parentName:"code",className:"token punctuation"},"("),(0,t.kt)("span",{parentName:"code",className:"token punctuation"},")")," ",(0,t.kt)("span",{parentName:"code",className:"token punctuation"},"{"),`
  `,(0,t.kt)("span",{parentName:"code",className:"token keyword control-flow"},"return")," ",(0,t.kt)("span",{parentName:"code",className:"token punctuation"},"("),`
    `,(0,t.kt)("span",{parentName:"code",className:"token tag"},(0,t.kt)("span",{parentName:"span",className:"token tag"},(0,t.kt)("span",{parentName:"span",className:"token punctuation"},"<"),"div"),(0,t.kt)("span",{parentName:"span",className:"token punctuation"},">")),(0,t.kt)("span",{parentName:"code",className:"token plain-text"},`
      `),(0,t.kt)("span",{parentName:"code",className:"token tag"},(0,t.kt)("span",{parentName:"span",className:"token tag"},(0,t.kt)("span",{parentName:"span",className:"token punctuation"},"<"),(0,t.kt)("span",{parentName:"span",className:"token class-name"},"Script")),`
        `,(0,t.kt)("span",{parentName:"span",className:"token attr-name"},"strategy"),(0,t.kt)("span",{parentName:"span",className:"token attr-value"},(0,t.kt)("span",{parentName:"span",className:"token punctuation attr-equals"},"="),(0,t.kt)("span",{parentName:"span",className:"token punctuation"},'"'),"afterInteractive",(0,t.kt)("span",{parentName:"span",className:"token punctuation"},'"')),`
        `,(0,t.kt)("span",{parentName:"span",className:"token attr-name"},"src"),(0,t.kt)("span",{parentName:"span",className:"token attr-value"},(0,t.kt)("span",{parentName:"span",className:"token punctuation attr-equals"},"="),(0,t.kt)("span",{parentName:"span",className:"token punctuation"},'"'),"https://www.googletagmanager.com/gtag/js?id=123",(0,t.kt)("span",{parentName:"span",className:"token punctuation"},'"')),`
      `,(0,t.kt)("span",{parentName:"span",className:"token punctuation"},"/>")),(0,t.kt)("span",{parentName:"code",className:"token plain-text"},`
    `),(0,t.kt)("span",{parentName:"code",className:"token tag"},(0,t.kt)("span",{parentName:"span",className:"token tag"},(0,t.kt)("span",{parentName:"span",className:"token punctuation"},"</"),"div"),(0,t.kt)("span",{parentName:"span",className:"token punctuation"},">")),`
  `,(0,t.kt)("span",{parentName:"code",className:"token punctuation"},")"),(0,t.kt)("span",{parentName:"code",className:"token punctuation"},";"),`
`,(0,t.kt)("span",{parentName:"code",className:"token punctuation"},"}"),`
`)),(0,t.kt)(r.P,{fontSize:"16px",mdxType:"P"},"The Script component introduces a ",(0,t.kt)("code",null,"strategy")," property that allows you to decide when to fetch and execute a script for optimal loading. To not negatively affect Largest Contentful Paint (LCP), most third-party scripts should be deferred to load after all the contents of a page has finished loading, either immediately after the page becomes interactive (",(0,t.kt)("code",null,'strategy="afterInteractive"'),") or lazily during browser idle time (",(0,t.kt)("code",null,'strategy="lazyOnload"'),")."),(0,t.kt)("br",null),(0,t.kt)("div",{style:{width:"100%",padding:"30px 20px",borderRadius:"10px",background:"#F3F3F3"}},(0,t.kt)(p.H3,{mdxType:"H3"},"Further Reading"),(0,t.kt)(o.UL,{mdxType:"UL"},(0,t.kt)(o.LI,{fontSize:"16px",mdxType:"LI"},(0,t.kt)("span",null,"Next.js:  "),(0,t.kt)(c.mj,{href:"/docs/basic-features/script",mdxType:"Link"},"Script Component")),(0,t.kt)(o.LI,{fontSize:"16px",mdxType:"LI"},(0,t.kt)("span",null,"Next.js:  "),(0,t.kt)(c.mj,{href:"/docs/api-reference/next/script",mdxType:"Link"},"API Reference for ",(0,t.kt)("code",null,"next/script"))))))}d.isMDXComponent=!0},43206:e=>{e.exports={link:"link_link__URfhR",error:"link_error__N26vQ",hoverUnderline:"link_hoverUnderline__BVku1"}}},e=>{var a=a=>e(e.s=a);e.O(0,[27,8746,4371,2878,4730,1067,8590,2888,9774,179],()=>a(53164)),_N_E=e.O()}]);