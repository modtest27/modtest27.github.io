(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3598],{7428:(a,e,n)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/learn-pages-router/seo/improve/dynamic-imports",function(){return n(73857)}])},21565:(a,e,n)=>{"use strict";n.d(e,{H3:()=>o,H4:()=>r,H5:()=>c});var t=n(58589),s=n(51853),p=n.n(s);function o(a){let{children:e}=a;return(0,t.jsxs)("h3",{className:"jsx-f28bd670423c9152",children:[e,(0,t.jsx)(p(),{id:"f28bd670423c9152",children:"h3.jsx-f28bd670423c9152{font-weight:bold;font-size:18px}h3.jsx-f28bd670423c9152 code{margin-left:6px;margin-right:6px}"})]})}function r(a){let{children:e,isCommand:n}=a;return(0,t.jsxs)("h4",{className:"jsx-b2c93fc58f79b843 "+((n?"command":"")||""),children:[e,(0,t.jsx)(p(),{id:"b2c93fc58f79b843",children:"h4.jsx-b2c93fc58f79b843{font-weight:bold;font-size:16px}.command.jsx-b2c93fc58f79b843{color:#bd10e0;font-family:Menlo,Monaco,Lucida Console,Liberation Mono,DejaVu Sans Mono,Bitstream Vera Sans Mono,Courier New,monospace,serif;font-size:.9em}h4.jsx-b2c93fc58f79b843 code{margin-left:6px;margin-right:6px}"})]})}function c(a){let{children:e}=a;return(0,t.jsxs)("h5",{className:"jsx-ed7f7d0730484ac7",children:[e,(0,t.jsx)(p(),{id:"ed7f7d0730484ac7",children:"h5.jsx-ed7f7d0730484ac7{font-weight:bold;font-size:15px}h5.jsx-ed7f7d0730484ac7 code{margin-left:6px;margin-right:6px}"})]})}},55272:(a,e,n)=>{"use strict";n.d(e,{mj:()=>k});var t=n(58589),s=n(51853),p=n.n(s),o=n(14517),r=n(77400),c=n(43206),m=n.n(c);function k(a){return!a.href.startsWith("/")||a.href.startsWith("/docs")||a.href.startsWith("/api")?a.href.includes("@")||a.href.startsWith("#")?(0,t.jsx)(i,{...a}):(0,t.jsx)(N,{...a}):(0,t.jsx)(l,{...a})}function l(a){let{href:e,as:n="",children:s,error:p=!1,underlineOnHover:c=!0}=a;return(0,t.jsx)(r.r,{as:n,className:(0,o.W)(m().link,{[m().error]:p,[m().hoverUnderline]:c}),href:e,children:s})}function i(a){let{href:e,onClick:n,children:s,underlineOnHover:o=!0}=a;return(0,t.jsxs)("a",{href:e,onClick:n,className:p().dynamic([["66cb3865d5d5c397",[o?"underline":"none"]]]),children:[s,(0,t.jsx)(p(),{id:"66cb3865d5d5c397",dynamic:[o?"underline":"none"],children:`a.__jsx-style-dynamic-selector{text-decoration:none;color:#0070f3;font-size:inherit;cursor:pointer}a.__jsx-style-dynamic-selector:hover{-webkit-text-decoration:${o?"underline":"none"};-moz-text-decoration:${o?"underline":"none"};text-decoration:${o?"underline":"none"}}`})]})}function N(a){let{href:e,children:n}=a;return(0,t.jsxs)("a",{href:e,rel:"noopener noreferrer",target:"_blank",className:"jsx-3da361ed9bbc2b1",children:[n,(0,t.jsx)(p(),{id:"3da361ed9bbc2b1",children:"a.jsx-3da361ed9bbc2b1{text-decoration:none;color:#0070f3;font-size:inherit}a.jsx-3da361ed9bbc2b1:hover{text-decoration:underline}"})]})}},79379:(a,e,n)=>{"use strict";n.d(e,{LI:()=>k,OL:()=>m,UL:()=>c});var t=n(58589),s=n(51853),p=n.n(s),o=n(69480),r=n.n(o);function c(a){let{children:e}=a;return(0,t.jsxs)("ul",{className:"jsx-571896de3ffb79ac",children:[e,(0,t.jsx)(p(),{id:"571896de3ffb79ac",children:'ul.jsx-571896de3ffb79ac{padding:0;list-style-type:none;margin-left:15px}ul.jsx-571896de3ffb79ac>li::before{content:"-";display:inline-block;color:#999;position:absolute;margin-left:-15px}'})]})}function m(a){let{children:e}=a;return(0,t.jsxs)("ol",{className:"jsx-fb2728ad24ced75e",children:[e,(0,t.jsx)(p(),{id:"fb2728ad24ced75e",children:"ol.jsx-fb2728ad24ced75e{padding:0;margin-left:15px}"})]})}function k(a){let{children:e,fontSize:n}=a;return(0,t.jsxs)("li",{className:p().dynamic([["255614beb736b7eb",[n||"14px"]]]),children:[e,(0,t.jsx)(p(),{id:"255614beb736b7eb",dynamic:[n||"14px"],children:`li.__jsx-style-dynamic-selector{${n||"14px"};line-height:24px;margin-bottom:10px}`})]})}c.propTypes={children:r().oneOfType([r().arrayOf(r().node),r().node])},m.propTypes={children:r().oneOfType([r().arrayOf(r().node),r().node])},k.propTypes={children:r().oneOfType([r().arrayOf(r().node),r().node]),fontSize:r().string}},92797:(a,e,n)=>{"use strict";n.d(e,{P:()=>c});var t=n(58589),s=n(51853),p=n.n(s),o=n(69480),r=n.n(o);function c(a){let{className:e="",children:n,large:s,fontSize:o}=a;return(0,t.jsxs)("p",{className:p().dynamic([["e913e368ec7c4317",[o||(s?"18px":"14px")]]])+" "+(e||""),children:[n,(0,t.jsx)(p(),{id:"e913e368ec7c4317",dynamic:[o||(s?"18px":"14px")],children:`p.__jsx-style-dynamic-selector{font-weight:400;font-size:${o||(s?"18px":"14px")};line-height:24px}`})]})}function m(a){let{children:e}=a;return(0,t.jsxs)("span",{className:"jsx-4a4877b22e18241e",children:[e,(0,t.jsx)(p(),{id:"4a4877b22e18241e",children:"span.jsx-4a4877b22e18241e{font-weight:600}"})]})}c.propTypes={className:r().string,large:r().bool,children:r().oneOfType([r().arrayOf(r().node),r().node]),fontSize:r().string},r().oneOfType([r().arrayOf(r().node),r().node]),m.propTypes={children:r().oneOfType([r().arrayOf(r().node),r().node])},r().oneOfType([r().arrayOf(r().node),r().node]),c.B=m},73857:(a,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>i,meta:()=>m}),n(10628);var t=n(16942),s=n(18590),p=n(79379),o=n(21565),r=n(92797),c=n(55272);let m={title:"Improving your Core Web Vitals",courseId:"seo",lessonId:"improve",stepId:"dynamic-imports",subtitle:"Dynamic Imports"},k={meta:m},l=a=>{let{children:e}=a;return(0,t.kt)(s.Z,{meta:m},e)};function i(a){let{components:e,...n}=a;return(0,t.kt)(l,{...k,...n,components:e,mdxType:"MDXLayout"},(0,t.kt)(r.P,{fontSize:"16px",mdxType:"P"},"In this lesson, we will reduce the amount of JavaScript loaded during initial page load from third-party libraries."),(0,t.kt)(r.P,{fontSize:"16px",mdxType:"P"},"Next.js supports ES2020"," ",(0,t.kt)(c.mj,{href:"/docs/advanced-features/dynamic-import",mdxType:"Link"},"dynamic `import()`")," ","for JavaScript. With it, you can import JavaScript modules dynamically and work with them. They also work with server-side rendering (SSR)."),(0,t.kt)(r.P,{fontSize:"16px",mdxType:"P"},"Think of dynamic imports as another way to split your code into manageable chunks."),(0,t.kt)(r.P,{fontSize:"16px",mdxType:"P"},"Open the ",(0,t.kt)("code",null,"pages/index.js")," file and remove these two imports at the beginning of the file as we are going to dynamically import them further down the file."),(0,t.kt)("pre",{className:"language-jsx"},(0,t.kt)("code",{parentName:"pre",className:"language-jsx"},(0,t.kt)("span",{parentName:"code",className:"token keyword module"},"import")," ",(0,t.kt)("span",{parentName:"code",className:"token imports"},(0,t.kt)("span",{parentName:"span",className:"token maybe-class-name"},"Fuse"))," ",(0,t.kt)("span",{parentName:"code",className:"token keyword module"},"from")," ",(0,t.kt)("span",{parentName:"code",className:"token string"},"'fuse.js'"),(0,t.kt)("span",{parentName:"code",className:"token punctuation"},";"),`
`,(0,t.kt)("span",{parentName:"code",className:"token keyword module"},"import")," ",(0,t.kt)("span",{parentName:"code",className:"token imports"},"_")," ",(0,t.kt)("span",{parentName:"code",className:"token keyword module"},"from")," ",(0,t.kt)("span",{parentName:"code",className:"token string"},"'lodash'"),(0,t.kt)("span",{parentName:"code",className:"token punctuation"},";"),`
`)),(0,t.kt)(r.P,{fontSize:"16px",mdxType:"P"},"For now we also want to remove:"),(0,t.kt)("pre",{className:"language-jsx"},(0,t.kt)("code",{parentName:"pre",className:"language-jsx"},(0,t.kt)("span",{parentName:"code",className:"token keyword"},"const")," fuse ",(0,t.kt)("span",{parentName:"code",className:"token operator"},"=")," ",(0,t.kt)("span",{parentName:"code",className:"token keyword"},"new")," ",(0,t.kt)("span",{parentName:"code",className:"token class-name"},"Fuse"),(0,t.kt)("span",{parentName:"code",className:"token punctuation"},"("),"countries",(0,t.kt)("span",{parentName:"code",className:"token punctuation"},",")," ",(0,t.kt)("span",{parentName:"code",className:"token punctuation"},"{"),`
  `,(0,t.kt)("span",{parentName:"code",className:"token literal-property property"},"keys"),(0,t.kt)("span",{parentName:"code",className:"token operator"},":")," ",(0,t.kt)("span",{parentName:"code",className:"token punctuation"},"["),(0,t.kt)("span",{parentName:"code",className:"token string"},"'name'"),(0,t.kt)("span",{parentName:"code",className:"token punctuation"},"]"),(0,t.kt)("span",{parentName:"code",className:"token punctuation"},","),`
  `,(0,t.kt)("span",{parentName:"code",className:"token literal-property property"},"threshold"),(0,t.kt)("span",{parentName:"code",className:"token operator"},":")," ",(0,t.kt)("span",{parentName:"code",className:"token number"},"0.3"),(0,t.kt)("span",{parentName:"code",className:"token punctuation"},","),`
`,(0,t.kt)("span",{parentName:"code",className:"token punctuation"},"}"),(0,t.kt)("span",{parentName:"code",className:"token punctuation"},")"),(0,t.kt)("span",{parentName:"code",className:"token punctuation"},";"),`
`)),(0,t.kt)(r.P,{fontSize:"16px",mdxType:"P"},"Now that we have removed this code, let's set up the search input to use the dynamically imported libraries."),(0,t.kt)(r.P,{fontSize:"16px",mdxType:"P"},"We can replace the input with the following code:"),(0,t.kt)("pre",{className:"language-jsx"},(0,t.kt)("code",{parentName:"pre",className:"language-jsx"},(0,t.kt)("span",{parentName:"code",className:"token tag"},(0,t.kt)("span",{parentName:"span",className:"token tag"},(0,t.kt)("span",{parentName:"span",className:"token punctuation"},"<"),"input"),`
  `,(0,t.kt)("span",{parentName:"span",className:"token attr-name"},"type"),(0,t.kt)("span",{parentName:"span",className:"token attr-value"},(0,t.kt)("span",{parentName:"span",className:"token punctuation attr-equals"},"="),(0,t.kt)("span",{parentName:"span",className:"token punctuation"},'"'),"text",(0,t.kt)("span",{parentName:"span",className:"token punctuation"},'"')),`
  `,(0,t.kt)("span",{parentName:"span",className:"token attr-name"},"placeholder"),(0,t.kt)("span",{parentName:"span",className:"token attr-value"},(0,t.kt)("span",{parentName:"span",className:"token punctuation attr-equals"},"="),(0,t.kt)("span",{parentName:"span",className:"token punctuation"},'"'),"Country search...",(0,t.kt)("span",{parentName:"span",className:"token punctuation"},'"')),`
  `,(0,t.kt)("span",{parentName:"span",className:"token attr-name"},"className"),(0,t.kt)("span",{parentName:"span",className:"token script language-javascript"},(0,t.kt)("span",{parentName:"span",className:"token script-punctuation punctuation"},"="),(0,t.kt)("span",{parentName:"span",className:"token punctuation"},"{"),"styles",(0,t.kt)("span",{parentName:"span",className:"token punctuation"},"."),(0,t.kt)("span",{parentName:"span",className:"token property-access"},"input"),(0,t.kt)("span",{parentName:"span",className:"token punctuation"},"}")),`
  `,(0,t.kt)("span",{parentName:"span",className:"token attr-name"},"onChange"),(0,t.kt)("span",{parentName:"span",className:"token script language-javascript"},(0,t.kt)("span",{parentName:"span",className:"token script-punctuation punctuation"},"="),(0,t.kt)("span",{parentName:"span",className:"token punctuation"},"{"),(0,t.kt)("span",{parentName:"span",className:"token keyword"},"async")," ",(0,t.kt)("span",{parentName:"span",className:"token punctuation"},"("),(0,t.kt)("span",{parentName:"span",className:"token parameter"},"e"),(0,t.kt)("span",{parentName:"span",className:"token punctuation"},")")," ",(0,t.kt)("span",{parentName:"span",className:"token arrow operator"},"=>")," ",(0,t.kt)("span",{parentName:"span",className:"token punctuation"},"{"),`
    `,(0,t.kt)("span",{parentName:"span",className:"token keyword"},"const")," ",(0,t.kt)("span",{parentName:"span",className:"token punctuation"},"{")," value ",(0,t.kt)("span",{parentName:"span",className:"token punctuation"},"}")," ",(0,t.kt)("span",{parentName:"span",className:"token operator"},"=")," e",(0,t.kt)("span",{parentName:"span",className:"token punctuation"},"."),(0,t.kt)("span",{parentName:"span",className:"token property-access"},"currentTarget"),(0,t.kt)("span",{parentName:"span",className:"token punctuation"},";"),`
    `,(0,t.kt)("span",{parentName:"span",className:"token comment"},"// Dynamically load libraries"),`
    `,(0,t.kt)("span",{parentName:"span",className:"token keyword"},"const")," ",(0,t.kt)("span",{parentName:"span",className:"token maybe-class-name"},"Fuse")," ",(0,t.kt)("span",{parentName:"span",className:"token operator"},"=")," ",(0,t.kt)("span",{parentName:"span",className:"token punctuation"},"("),(0,t.kt)("span",{parentName:"span",className:"token keyword control-flow"},"await")," ",(0,t.kt)("span",{parentName:"span",className:"token keyword module"},"import"),(0,t.kt)("span",{parentName:"span",className:"token punctuation"},"("),(0,t.kt)("span",{parentName:"span",className:"token string"},"'fuse.js'"),(0,t.kt)("span",{parentName:"span",className:"token punctuation"},")"),(0,t.kt)("span",{parentName:"span",className:"token punctuation"},")"),(0,t.kt)("span",{parentName:"span",className:"token punctuation"},"."),(0,t.kt)("span",{parentName:"span",className:"token keyword module"},"default"),(0,t.kt)("span",{parentName:"span",className:"token punctuation"},";"),`
    `,(0,t.kt)("span",{parentName:"span",className:"token keyword"},"const")," _ ",(0,t.kt)("span",{parentName:"span",className:"token operator"},"=")," ",(0,t.kt)("span",{parentName:"span",className:"token punctuation"},"("),(0,t.kt)("span",{parentName:"span",className:"token keyword control-flow"},"await")," ",(0,t.kt)("span",{parentName:"span",className:"token keyword module"},"import"),(0,t.kt)("span",{parentName:"span",className:"token punctuation"},"("),(0,t.kt)("span",{parentName:"span",className:"token string"},"'lodash'"),(0,t.kt)("span",{parentName:"span",className:"token punctuation"},")"),(0,t.kt)("span",{parentName:"span",className:"token punctuation"},")"),(0,t.kt)("span",{parentName:"span",className:"token punctuation"},"."),(0,t.kt)("span",{parentName:"span",className:"token keyword module"},"default"),(0,t.kt)("span",{parentName:"span",className:"token punctuation"},";"),`

    `,(0,t.kt)("span",{parentName:"span",className:"token keyword"},"const")," fuse ",(0,t.kt)("span",{parentName:"span",className:"token operator"},"=")," ",(0,t.kt)("span",{parentName:"span",className:"token keyword"},"new")," ",(0,t.kt)("span",{parentName:"span",className:"token class-name"},"Fuse"),(0,t.kt)("span",{parentName:"span",className:"token punctuation"},"("),"countries",(0,t.kt)("span",{parentName:"span",className:"token punctuation"},",")," ",(0,t.kt)("span",{parentName:"span",className:"token punctuation"},"{"),`
      `,(0,t.kt)("span",{parentName:"span",className:"token literal-property property"},"keys"),(0,t.kt)("span",{parentName:"span",className:"token operator"},":")," ",(0,t.kt)("span",{parentName:"span",className:"token punctuation"},"["),(0,t.kt)("span",{parentName:"span",className:"token string"},"'name'"),(0,t.kt)("span",{parentName:"span",className:"token punctuation"},"]"),(0,t.kt)("span",{parentName:"span",className:"token punctuation"},","),`
      `,(0,t.kt)("span",{parentName:"span",className:"token literal-property property"},"threshold"),(0,t.kt)("span",{parentName:"span",className:"token operator"},":")," ",(0,t.kt)("span",{parentName:"span",className:"token number"},"0.3"),(0,t.kt)("span",{parentName:"span",className:"token punctuation"},","),`
    `,(0,t.kt)("span",{parentName:"span",className:"token punctuation"},"}"),(0,t.kt)("span",{parentName:"span",className:"token punctuation"},")"),(0,t.kt)("span",{parentName:"span",className:"token punctuation"},";"),`

    `,(0,t.kt)("span",{parentName:"span",className:"token keyword"},"const")," searchResult ",(0,t.kt)("span",{parentName:"span",className:"token operator"},"=")," fuse",(0,t.kt)("span",{parentName:"span",className:"token punctuation"},"."),(0,t.kt)("span",{parentName:"span",className:"token method function property-access"},"search"),(0,t.kt)("span",{parentName:"span",className:"token punctuation"},"("),"value",(0,t.kt)("span",{parentName:"span",className:"token punctuation"},")"),(0,t.kt)("span",{parentName:"span",className:"token punctuation"},"."),(0,t.kt)("span",{parentName:"span",className:"token method function property-access"},"map"),(0,t.kt)("span",{parentName:"span",className:"token punctuation"},"("),(0,t.kt)("span",{parentName:"span",className:"token punctuation"},"("),(0,t.kt)("span",{parentName:"span",className:"token parameter"},"result"),(0,t.kt)("span",{parentName:"span",className:"token punctuation"},")")," ",(0,t.kt)("span",{parentName:"span",className:"token arrow operator"},"=>")," result",(0,t.kt)("span",{parentName:"span",className:"token punctuation"},"."),(0,t.kt)("span",{parentName:"span",className:"token property-access"},"item"),(0,t.kt)("span",{parentName:"span",className:"token punctuation"},")"),(0,t.kt)("span",{parentName:"span",className:"token punctuation"},";"),`

    `,(0,t.kt)("span",{parentName:"span",className:"token keyword"},"const")," updatedResults ",(0,t.kt)("span",{parentName:"span",className:"token operator"},"=")," searchResult",(0,t.kt)("span",{parentName:"span",className:"token punctuation"},"."),(0,t.kt)("span",{parentName:"span",className:"token property-access"},"length")," ",(0,t.kt)("span",{parentName:"span",className:"token operator"},"?")," searchResult ",(0,t.kt)("span",{parentName:"span",className:"token operator"},":")," countries",(0,t.kt)("span",{parentName:"span",className:"token punctuation"},";"),`
    `,(0,t.kt)("span",{parentName:"span",className:"token function"},"setResults"),(0,t.kt)("span",{parentName:"span",className:"token punctuation"},"("),"updatedResults",(0,t.kt)("span",{parentName:"span",className:"token punctuation"},")"),(0,t.kt)("span",{parentName:"span",className:"token punctuation"},";"),`

    `,(0,t.kt)("span",{parentName:"span",className:"token comment"},"// Fake analytics hit"),`
    `,(0,t.kt)("span",{parentName:"span",className:"token console class-name"},"console"),(0,t.kt)("span",{parentName:"span",className:"token punctuation"},"."),(0,t.kt)("span",{parentName:"span",className:"token method function property-access"},"info"),(0,t.kt)("span",{parentName:"span",className:"token punctuation"},"("),(0,t.kt)("span",{parentName:"span",className:"token punctuation"},"{"),`
      `,(0,t.kt)("span",{parentName:"span",className:"token literal-property property"},"searchedAt"),(0,t.kt)("span",{parentName:"span",className:"token operator"},":")," _",(0,t.kt)("span",{parentName:"span",className:"token punctuation"},"."),(0,t.kt)("span",{parentName:"span",className:"token method function property-access"},"now"),(0,t.kt)("span",{parentName:"span",className:"token punctuation"},"("),(0,t.kt)("span",{parentName:"span",className:"token punctuation"},")"),(0,t.kt)("span",{parentName:"span",className:"token punctuation"},","),`
    `,(0,t.kt)("span",{parentName:"span",className:"token punctuation"},"}"),(0,t.kt)("span",{parentName:"span",className:"token punctuation"},")"),(0,t.kt)("span",{parentName:"span",className:"token punctuation"},";"),`
  `,(0,t.kt)("span",{parentName:"span",className:"token punctuation"},"}"),(0,t.kt)("span",{parentName:"span",className:"token punctuation"},"}")),`
`,(0,t.kt)("span",{parentName:"span",className:"token punctuation"},"/>")),`
`)),(0,t.kt)(r.P,{fontSize:"16px",mdxType:"P"},'By using Dynamic Imports, this fixes the "Remove unused JavaScript" issue on page load. This also improves our Time to Interactive (TTI), which helps improve'," ",(0,t.kt)(c.mj,{href:"/learn/seo/web-performance/fid",mdxType:"Link"},"First Input Delay (FID)"),"."),(0,t.kt)(r.P,{fontSize:"16px",mdxType:"P"},"Let's run another Lighthouse Report in Chrome DevTools to view our progress."),(0,t.kt)("br",null),(0,t.kt)("div",{style:{width:"100%",padding:"30px 20px",borderRadius:"10px",background:"#F3F3F3"}},(0,t.kt)(o.H3,{mdxType:"H3"},"Further Reading"),(0,t.kt)(p.UL,{mdxType:"UL"},(0,t.kt)(p.LI,{fontSize:"16px",mdxType:"LI"},(0,t.kt)("span",null,"Next.js:  "),(0,t.kt)(c.mj,{href:"/docs/advanced-features/dynamic-import",mdxType:"Link"},"Dynamic Imports Documentation")))))}i.isMDXComponent=!0},43206:a=>{a.exports={link:"link_link__URfhR",error:"link_error__N26vQ",hoverUnderline:"link_hoverUnderline__BVku1"}}},a=>{var e=e=>a(a.s=e);a.O(0,[27,8746,4371,2878,4730,1067,8590,2888,9774,179],()=>e(7428)),_N_E=a.O()}]);