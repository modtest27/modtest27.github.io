(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3921],{65690:(e,n,a)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/learn-pages-router/seo/improve/dynamic-import-components",function(){return a(12193)}])},21565:(e,n,a)=>{"use strict";a.d(n,{H3:()=>p,H4:()=>r,H5:()=>c});var t=a(58589),o=a(51853),s=a.n(o);function p(e){let{children:n}=e;return(0,t.jsxs)("h3",{className:"jsx-f28bd670423c9152",children:[n,(0,t.jsx)(s(),{id:"f28bd670423c9152",children:"h3.jsx-f28bd670423c9152{font-weight:bold;font-size:18px}h3.jsx-f28bd670423c9152 code{margin-left:6px;margin-right:6px}"})]})}function r(e){let{children:n,isCommand:a}=e;return(0,t.jsxs)("h4",{className:"jsx-b2c93fc58f79b843 "+((a?"command":"")||""),children:[n,(0,t.jsx)(s(),{id:"b2c93fc58f79b843",children:"h4.jsx-b2c93fc58f79b843{font-weight:bold;font-size:16px}.command.jsx-b2c93fc58f79b843{color:#bd10e0;font-family:Menlo,Monaco,Lucida Console,Liberation Mono,DejaVu Sans Mono,Bitstream Vera Sans Mono,Courier New,monospace,serif;font-size:.9em}h4.jsx-b2c93fc58f79b843 code{margin-left:6px;margin-right:6px}"})]})}function c(e){let{children:n}=e;return(0,t.jsxs)("h5",{className:"jsx-ed7f7d0730484ac7",children:[n,(0,t.jsx)(s(),{id:"ed7f7d0730484ac7",children:"h5.jsx-ed7f7d0730484ac7{font-weight:bold;font-size:15px}h5.jsx-ed7f7d0730484ac7 code{margin-left:6px;margin-right:6px}"})]})}},55272:(e,n,a)=>{"use strict";a.d(n,{mj:()=>l});var t=a(58589),o=a(51853),s=a.n(o),p=a(14517),r=a(77400),c=a(43206),i=a.n(c);function l(e){return!e.href.startsWith("/")||e.href.startsWith("/docs")||e.href.startsWith("/api")?e.href.includes("@")||e.href.startsWith("#")?(0,t.jsx)(m,{...e}):(0,t.jsx)(k,{...e}):(0,t.jsx)(d,{...e})}function d(e){let{href:n,as:a="",children:o,error:s=!1,underlineOnHover:c=!0}=e;return(0,t.jsx)(r.r,{as:a,className:(0,p.W)(i().link,{[i().error]:s,[i().hoverUnderline]:c}),href:n,children:o})}function m(e){let{href:n,onClick:a,children:o,underlineOnHover:p=!0}=e;return(0,t.jsxs)("a",{href:n,onClick:a,className:s().dynamic([["66cb3865d5d5c397",[p?"underline":"none"]]]),children:[o,(0,t.jsx)(s(),{id:"66cb3865d5d5c397",dynamic:[p?"underline":"none"],children:`a.__jsx-style-dynamic-selector{text-decoration:none;color:#0070f3;font-size:inherit;cursor:pointer}a.__jsx-style-dynamic-selector:hover{-webkit-text-decoration:${p?"underline":"none"};-moz-text-decoration:${p?"underline":"none"};text-decoration:${p?"underline":"none"}}`})]})}function k(e){let{href:n,children:a}=e;return(0,t.jsxs)("a",{href:n,rel:"noopener noreferrer",target:"_blank",className:"jsx-3da361ed9bbc2b1",children:[a,(0,t.jsx)(s(),{id:"3da361ed9bbc2b1",children:"a.jsx-3da361ed9bbc2b1{text-decoration:none;color:#0070f3;font-size:inherit}a.jsx-3da361ed9bbc2b1:hover{text-decoration:underline}"})]})}},79379:(e,n,a)=>{"use strict";a.d(n,{LI:()=>l,OL:()=>i,UL:()=>c});var t=a(58589),o=a(51853),s=a.n(o),p=a(69480),r=a.n(p);function c(e){let{children:n}=e;return(0,t.jsxs)("ul",{className:"jsx-571896de3ffb79ac",children:[n,(0,t.jsx)(s(),{id:"571896de3ffb79ac",children:'ul.jsx-571896de3ffb79ac{padding:0;list-style-type:none;margin-left:15px}ul.jsx-571896de3ffb79ac>li::before{content:"-";display:inline-block;color:#999;position:absolute;margin-left:-15px}'})]})}function i(e){let{children:n}=e;return(0,t.jsxs)("ol",{className:"jsx-fb2728ad24ced75e",children:[n,(0,t.jsx)(s(),{id:"fb2728ad24ced75e",children:"ol.jsx-fb2728ad24ced75e{padding:0;margin-left:15px}"})]})}function l(e){let{children:n,fontSize:a}=e;return(0,t.jsxs)("li",{className:s().dynamic([["255614beb736b7eb",[a||"14px"]]]),children:[n,(0,t.jsx)(s(),{id:"255614beb736b7eb",dynamic:[a||"14px"],children:`li.__jsx-style-dynamic-selector{${a||"14px"};line-height:24px;margin-bottom:10px}`})]})}c.propTypes={children:r().oneOfType([r().arrayOf(r().node),r().node])},i.propTypes={children:r().oneOfType([r().arrayOf(r().node),r().node])},l.propTypes={children:r().oneOfType([r().arrayOf(r().node),r().node]),fontSize:r().string}},92797:(e,n,a)=>{"use strict";a.d(n,{P:()=>c});var t=a(58589),o=a(51853),s=a.n(o),p=a(69480),r=a.n(p);function c(e){let{className:n="",children:a,large:o,fontSize:p}=e;return(0,t.jsxs)("p",{className:s().dynamic([["e913e368ec7c4317",[p||(o?"18px":"14px")]]])+" "+(n||""),children:[a,(0,t.jsx)(s(),{id:"e913e368ec7c4317",dynamic:[p||(o?"18px":"14px")],children:`p.__jsx-style-dynamic-selector{font-weight:400;font-size:${p||(o?"18px":"14px")};line-height:24px}`})]})}function i(e){let{children:n}=e;return(0,t.jsxs)("span",{className:"jsx-4a4877b22e18241e",children:[n,(0,t.jsx)(s(),{id:"4a4877b22e18241e",children:"span.jsx-4a4877b22e18241e{font-weight:600}"})]})}c.propTypes={className:r().string,large:r().bool,children:r().oneOfType([r().arrayOf(r().node),r().node]),fontSize:r().string},r().oneOfType([r().arrayOf(r().node),r().node]),i.propTypes={children:r().oneOfType([r().arrayOf(r().node),r().node])},r().oneOfType([r().arrayOf(r().node),r().node]),c.B=i},12193:(e,n,a)=>{"use strict";a.r(n),a.d(n,{default:()=>m,meta:()=>i}),a(10628);var t=a(16942),o=a(18590),s=a(79379),p=a(21565),r=a(92797),c=a(55272);let i={title:"Improving your Core Web Vitals",courseId:"seo",lessonId:"improve",stepId:"dynamic-import-components",subtitle:"Dynamic Imports for Components"},l={meta:i},d=e=>{let{children:n}=e;return(0,t.kt)(o.Z,{meta:i},n)};function m(e){let{components:n,...a}=e;return(0,t.kt)(d,{...l,...a,components:n,mdxType:"MDXLayout"},(0,t.kt)(r.P,{fontSize:"16px",mdxType:"P"},"Next, let's turn our attention to a React component that is not needed on the initial page load."),(0,t.kt)(r.P,{fontSize:"16px",mdxType:"P"},"React components can also be imported using dynamic imports, but in this case we use it in conjunction with ",(0,t.kt)("code",null,"next/dynamic")," to make sure it works just like any other React Component."),(0,t.kt)(r.P,{fontSize:"16px",mdxType:"P"},"We will use this method to delay the loading of our modal with the"," ",(0,t.kt)("code",null,"Hello World")," code sample. By doing this we also remove two further third party libraries from the initial page load."),(0,t.kt)(r.P,{fontSize:"16px",mdxType:"P"},"Open the ",(0,t.kt)("code",null,"pages/index.js")," file and add an import for"," ",(0,t.kt)("code",null,"dynamic")," from ",(0,t.kt)("code",null,"next/dynamic")," at the beginning of the file:"),(0,t.kt)("pre",{className:"language-jsx"},(0,t.kt)("code",{parentName:"pre",className:"language-jsx"},(0,t.kt)("span",{parentName:"code",className:"token keyword module"},"import")," ",(0,t.kt)("span",{parentName:"code",className:"token imports"},"dynamic")," ",(0,t.kt)("span",{parentName:"code",className:"token keyword module"},"from")," ",(0,t.kt)("span",{parentName:"code",className:"token string"},"'next/dynamic'"),(0,t.kt)("span",{parentName:"code",className:"token punctuation"},";"),`
`)),(0,t.kt)(r.P,{fontSize:"16px",mdxType:"P"},"We should also remove this line:"),(0,t.kt)("pre",{className:"language-jsx"},(0,t.kt)("code",{parentName:"pre",className:"language-jsx"},(0,t.kt)("span",{parentName:"code",className:"token keyword module"},"import")," ",(0,t.kt)("span",{parentName:"code",className:"token imports"},(0,t.kt)("span",{parentName:"span",className:"token maybe-class-name"},"CodeSampleModal"))," ",(0,t.kt)("span",{parentName:"code",className:"token keyword module"},"from")," ",(0,t.kt)("span",{parentName:"code",className:"token string"},"'../components/CodeSampleModal'"),(0,t.kt)("span",{parentName:"code",className:"token punctuation"},";"),`
`)),(0,t.kt)(r.P,{fontSize:"16px",mdxType:"P"},"We can now import it as a dynamic component by adding the following at the beginning of the file:"),(0,t.kt)("pre",{className:"language-jsx"},(0,t.kt)("code",{parentName:"pre",className:"language-jsx"},(0,t.kt)("span",{parentName:"code",className:"token keyword"},"const")," ",(0,t.kt)("span",{parentName:"code",className:"token maybe-class-name"},"CodeSampleModal")," ",(0,t.kt)("span",{parentName:"code",className:"token operator"},"=")," ",(0,t.kt)("span",{parentName:"code",className:"token function"},"dynamic"),(0,t.kt)("span",{parentName:"code",className:"token punctuation"},"("),(0,t.kt)("span",{parentName:"code",className:"token punctuation"},"("),(0,t.kt)("span",{parentName:"code",className:"token punctuation"},")")," ",(0,t.kt)("span",{parentName:"code",className:"token arrow operator"},"=>")," ",(0,t.kt)("span",{parentName:"code",className:"token keyword module"},"import"),(0,t.kt)("span",{parentName:"code",className:"token punctuation"},"("),(0,t.kt)("span",{parentName:"code",className:"token string"},"'../components/CodeSampleModal'"),(0,t.kt)("span",{parentName:"code",className:"token punctuation"},")"),(0,t.kt)("span",{parentName:"code",className:"token punctuation"},",")," ",(0,t.kt)("span",{parentName:"code",className:"token punctuation"},"{"),`
  `,(0,t.kt)("span",{parentName:"code",className:"token literal-property property"},"ssr"),(0,t.kt)("span",{parentName:"code",className:"token operator"},":")," ",(0,t.kt)("span",{parentName:"code",className:"token boolean"},"false"),(0,t.kt)("span",{parentName:"code",className:"token punctuation"},","),`
`,(0,t.kt)("span",{parentName:"code",className:"token punctuation"},"}"),(0,t.kt)("span",{parentName:"code",className:"token punctuation"},")"),(0,t.kt)("span",{parentName:"code",className:"token punctuation"},";"),`
`)),(0,t.kt)(r.P,{fontSize:"16px",mdxType:"P"},(0,t.kt)("code",null,"CodeSampleModal")," will be the default component returned by",(0,t.kt)("code",null,"../components/CodeSampleModal"),". It works like a regular React Component, and you can pass props to it as you normally would."),(0,t.kt)(r.P,{fontSize:"16px",mdxType:"P"},"As we do not need this component on the server, we have used"," ",(0,t.kt)("code",null,"ssr: false")," to disable it."),(0,t.kt)(r.P,{fontSize:"16px",mdxType:"P"},"Next, we want to defer the loading of this component until it's required by the user. To do this, we can wrap the component in a conditional that checks if the modal should be open, and if so, it will be loaded."),(0,t.kt)(r.P,{fontSize:"16px",mdxType:"P"},"Wrap the ",(0,t.kt)("code",null,"CodeSampleModal")," component like so:"),(0,t.kt)("pre",{className:"language-jsx"},(0,t.kt)("code",{parentName:"pre",className:"language-jsx"},(0,t.kt)("span",{parentName:"code",className:"token punctuation"},"{"),`
  isModalOpen `,(0,t.kt)("span",{parentName:"code",className:"token operator"},"&&")," ",(0,t.kt)("span",{parentName:"code",className:"token punctuation"},"("),`
    `,(0,t.kt)("span",{parentName:"code",className:"token tag"},(0,t.kt)("span",{parentName:"span",className:"token tag"},(0,t.kt)("span",{parentName:"span",className:"token punctuation"},"<"),(0,t.kt)("span",{parentName:"span",className:"token class-name"},"CodeSampleModal")),`
      `,(0,t.kt)("span",{parentName:"span",className:"token attr-name"},"isOpen"),(0,t.kt)("span",{parentName:"span",className:"token script language-javascript"},(0,t.kt)("span",{parentName:"span",className:"token script-punctuation punctuation"},"="),(0,t.kt)("span",{parentName:"span",className:"token punctuation"},"{"),"isModalOpen",(0,t.kt)("span",{parentName:"span",className:"token punctuation"},"}")),`
      `,(0,t.kt)("span",{parentName:"span",className:"token attr-name"},"closeModal"),(0,t.kt)("span",{parentName:"span",className:"token script language-javascript"},(0,t.kt)("span",{parentName:"span",className:"token script-punctuation punctuation"},"="),(0,t.kt)("span",{parentName:"span",className:"token punctuation"},"{"),(0,t.kt)("span",{parentName:"span",className:"token punctuation"},"("),(0,t.kt)("span",{parentName:"span",className:"token punctuation"},")")," ",(0,t.kt)("span",{parentName:"span",className:"token arrow operator"},"=>")," ",(0,t.kt)("span",{parentName:"span",className:"token function"},"setIsModalOpen"),(0,t.kt)("span",{parentName:"span",className:"token punctuation"},"("),(0,t.kt)("span",{parentName:"span",className:"token boolean"},"false"),(0,t.kt)("span",{parentName:"span",className:"token punctuation"},")"),(0,t.kt)("span",{parentName:"span",className:"token punctuation"},"}")),`
    `,(0,t.kt)("span",{parentName:"span",className:"token punctuation"},"/>")),`
  `,(0,t.kt)("span",{parentName:"code",className:"token punctuation"},")"),(0,t.kt)("span",{parentName:"code",className:"token punctuation"},";"),`
`,(0,t.kt)("span",{parentName:"code",className:"token punctuation"},"}"),`
`)),(0,t.kt)(r.P,{fontSize:"16px",mdxType:"P"},"Now, when ",(0,t.kt)("code",null,"isModalOpen")," is toggled to ",(0,t.kt)("code",null,"true")," for the first time, the JavaScript required will be requested."),(0,t.kt)(r.P,{fontSize:"16px",mdxType:"P"},"With these optimizations the vitals should now look healthier. Let's run another Lighthouse report in Chrome DevTools to verify."),(0,t.kt)(r.P,{fontSize:"16px",mdxType:"P"},"We are left with this two optimization suggestions:"),(0,t.kt)(s.UL,{mdxType:"UL"},(0,t.kt)(s.LI,{fontSize:"16px",mdxType:"LI"},(0,t.kt)("strong",null,"Use HTTP2"),": to solve this problem, we can deploy to somewhere that supports HTTP2 (e.g."," ",(0,t.kt)(c.mj,{href:"https://www.vercel.com",mdxType:"Link"},"Vercel"),")."),(0,t.kt)(s.LI,{fontSize:"16px",mdxType:"LI"},(0,t.kt)("strong",null,"Image elements do no have explicit ",(0,t.kt)("code",null,"width")," and",(0,t.kt)("code",null,"height")),": This is actually a ",(0,t.kt)(c.mj,{href:"https://github.com/GoogleChrome/lighthouse/issues/11631",mdxType:"Link"},"bug in lighthouse")," and does not affect site performance.")),(0,t.kt)("br",null),(0,t.kt)("div",{style:{width:"100%",padding:"30px 20px",borderRadius:"10px",background:"#F3F3F3"}},(0,t.kt)(p.H3,{mdxType:"H3"},"Further Reading"),(0,t.kt)(s.UL,{mdxType:"UL"},(0,t.kt)(s.LI,{fontSize:"16px",mdxType:"LI"},(0,t.kt)("span",null,"Next.js:  "),(0,t.kt)(c.mj,{href:"/docs/advanced-features/dynamic-import#basic-usage",mdxType:"Link"},"Dynamic Imports Documentation")))))}m.isMDXComponent=!0},43206:e=>{e.exports={link:"link_link__URfhR",error:"link_error__N26vQ",hoverUnderline:"link_hoverUnderline__BVku1"}}},e=>{var n=n=>e(e.s=n);e.O(0,[27,8746,4371,2878,4730,1067,8590,2888,9774,179],()=>n(65690)),_N_E=e.O()}]);